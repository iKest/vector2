<?xml version="1.0" encoding="UTF-8"?>
<Root>
    <Objects>
        <Object Name="SpeedVault" X="0" Y="0" Label="Trigger">
            <Content>
                <Area Name="SpeedVault" X="0" Y="0" Width="100" Height="200" Type="Animation" />
            </Content>
        </Object>
        <Object Name="SpeedVaultFly" X="0" Y="0" Label="Trigger">
            <Content>
                <Area Name="SpeedVaultFly" X="0" Y="0" Width="100" Height="200" Type="Animation" />
            </Content>
        </Object>
        <Object Name="CollisionToFly" X="0" Y="0" Label="Trigger">
            <Content>
                <Area Name="CollisionToFly" X="0" Y="0" Width="150" Height="300" Type="Animation" />
            </Content>
        </Object>
        <Object Name="PopVault" X="0" Y="0" Label="Trigger">
            <Content>
                <Area Name="PopVault" X="0" Y="0" Width="100" Height="200" Type="Animation" />
            </Content>
        </Object>
        <Object Name="PopVaultClose" X="0" Y="0" Label="Trigger">
            <Content>
                <Area Name="PopVaultClose" X="0" Y="0" Width="100" Height="200" Type="Animation" />
            </Content>
        </Object>
        <Object Name="DivingKong" X="0" Y="0" Label="Trigger">
            <Content>
                <Area Name="DivingKong" X="0" Y="0" Width="100" Height="200" Type="Animation" />
            </Content>
        </Object>
        <Object Name="CameraStart" X="0" Y="0" Label="Trigger">
            <Content>
                <Trigger Name="TriggerStart" X="0" Y="0" Width="300" Height="400">
                    <Content>
                        <Init>
                            <SetVariable Name="$Active" Type="Bool" Value="1" />
                            <SetVariable Name="$Node" Type="Node" Value="COM" />
                            <SetVariable Name="Follow" Value="_$Model" />
                            <SetVariable Name="$AI" Type="AI" Value="0" />
                        </Init>
                        <Template Name="CameraFollow" />
                    </Content>
                </Trigger>
            </Content>
        </Object>
        <Object Name="ZoomMin" X="0" Y="0" Label="Trigger">
            <Content>
                <Trigger Name="TriggerZoomMin" X="0" Y="0" Width="100" Height="3500">
                    <Content>
                        <Init>
                            <SetVariable Name="$Active" Type="Bool" Value="1" />
                            <SetVariable Name="$Node" Type="Node" Value="COM" />
                            <SetVariable Name="Zoom" Value="0.65" />
                            <SetVariable Name="$AI" Type="AI" Value="0" />
                        </Init>
                        <Template Name="CameraZoom" />
                    </Content>
                </Trigger>
            </Content>
        </Object>
        <Object Name="CtrlOut" X="0" Y="0">
            <Content>
                <Trigger Name="TriggerCtrlOut" X="0" Y="0" Width="~SizeX" Height="~SizeY">
                    <Content>
                        <Init>
                            <SetVariable Name="$Active" Type="Bool" Value="1" />
                            <SetVariable Name="$Node" Type="Node" Value="COM" />
                            <SetVariable Name="$AI" Type="AI" Value="0" />
                        </Init>
                        <Loop Name="TurnOff">
                            <Events Template="FreqUsed.Enter" />
                            <Conditions>
                                <Equal Value1="?getModel[Player].isControlled" Value2="1" />
                            </Conditions>
                            <Actions>
                                <Control Model="Player" Switch="Off" />
                            </Actions>
                        </Loop>
                        <Loop Name="TurnOffOnExit_IfSpawnedInsideTrigger">
                            <Events Template="FreqUsed.Exit" />
                            <Conditions>
                                <Equal Value1="?getModel[Player].isControlled" Value2="1" />
                            </Conditions>
                            <Actions>
                                <Control Model="Player" Switch="Off" />
                            </Actions>
                        </Loop>
                    </Content>
                </Trigger>
            </Content>
            <Properties>
                <Static>
                    <ContentVariable>
                        <Variable Name="SizeX" Type="E_Int" Default="200" AvailableTypes="E_Int" />
                        <Variable Name="SizeY" Type="E_Int" Default="300" AvailableTypes="E_Int" />
                    </ContentVariable>
                </Static>
            </Properties>
        </Object>
        <Object Name="ZoomNormal" X="0" Y="0" Label="Trigger">
            <Content>
                <Trigger Name="TriggerZoomNormal" X="0" Y="0" Width="100" Height="3500">
                    <Content>
                        <Init>
                            <SetVariable Name="$Active" Type="Bool" Value="1" />
                            <SetVariable Name="$Node" Type="Node" Value="COM" />
                            <SetVariable Name="Zoom" Value="1" />
                            <SetVariable Name="$AI" Type="AI" Value="0" />
                        </Init>
                        <Template Name="CameraZoom" />
                    </Content>
                </Trigger>
            </Content>
        </Object>
        <Object Name="ZoomMax" X="0" Y="0" Label="Trigger">
            <Content>
                <Trigger Name="TriggerZoomMax" X="0" Y="0" Width="100" Height="3500">
                    <Content>
                        <Init>
                            <SetVariable Name="$Active" Type="Bool" Value="1" />
                            <SetVariable Name="$Node" Type="Node" Value="COM" />
                            <SetVariable Name="Zoom" Value="1.1" />
                            <SetVariable Name="$AI" Type="AI" Value="0" />
                        </Init>
                        <Template Name="CameraZoom" />
                    </Content>
                </Trigger>
            </Content>
        </Object>
        <Object Name="LandingStop" X="0" Y="0" Label="Trigger">
            <Content>
                <Area Name="LandingStop" X="0" Y="0" Width="500" Height="200" Type="Animation" />
            </Content>
        </Object>
        <Object Name="RunFromInhibition" X="0" Y="0" Label="Trigger">
            <Content>
                <Area Name="RunFromInhibition" X="0" Y="0" Width="100" Height="200" Type="Animation" />
            </Content>
        </Object>
        <Object Name="DivingKongFly" X="0" Y="0" Label="Trigger">
            <Content>
                <Area Name="DivingKongFly" X="0" Y="0" Width="100" Height="200" Type="Animation" />
            </Content>
        </Object>
        <Object Name="HurdleJump" X="0" Y="0" Label="Trigger">
            <Content>
                <Area Name="HurdleJump" X="0" Y="0" Width="175" Height="200" Type="Animation" />
            </Content>
        </Object>
        <Object Name="JumpAndRoll" X="0" Y="0" Label="Trigger">
            <Content>
                <Area Name="JumpAndRoll" X="0" Y="0" Width="100" Height="200" Type="Animation" />
            </Content>
        </Object>
        <Object Name="HighJump300" X="0" Y="0" Label="Trigger">
            <Content>
                <Area Name="HighJump" X="0" Y="0" Width="300" Height="150" Type="Animation" />
            </Content>
        </Object>
        <Object Name="HighJump500" X="0" Y="0" Label="Trigger">
            <Content>
                <Area Name="HighJump" X="0" Y="0" Width="500" Height="150" Type="Animation" />
            </Content>
        </Object>
        <Object Name="Victory" X="0" Y="0" Label="Trigger">
            <Content>
                <Trigger Name="TriggerVictory" X="0" Y="0" Width="100" Height="300">
                    <Content>
                        <Init>
                            <SetVariable Name="$Active" Type="Bool" Value="1" />
                            <SetVariable Name="$AI" Type="AI" Value="0" />
                            <SetVariable Name="$Node" Type="Node" Value="COM" />
                            <SetVariable Name="Time" Value="~Time" />
                            <SetVariable Name="Reward" Value="~FloorReward" />
                            <SetVariable Name="CashResult" Value="~FloorReward" />
                            <SetVariable Name="Adder" Value="{?getCounter[PassiveEffects, AddPoints]+?getCounter[PassiveEffects, AddPointsVictory]}" />
                            <SetVariable Name="Multiplier" Value="{?getCounter[PassiveEffects, PointsAddPercentage]+?getCounter[PassiveEffects, PointsAddPercentageVictory]}" />
                            <SetVariable Name="#Currency" Value="None" />
                            <SetVariable Name="CurrencyType" Value="Points" />
                            <SetVariable Name="IconImageColor" Value="orange" />
                            <SetVariable Name="#Gadget" Value="None" />
                        </Init>
                        <Loop Name="ExecuteWin">
                            <Events Template="FreqUsed.Enter" />
                            <Conditions>
                                <Operator Type="Or">
                                    <Equal Value1="?getBalance[Quests,PowerFailures,Floor]" Value2="{?getCounter[ST_Floor] + 1}" Not="1" />
                                    <Equal Value1="?getCounter[ST_Quests,PowerFailures]" Value2="1" Not="1" />
                                </Operator>
                            </Conditions>
                            <Actions>
                                <Control Model="Player" Switch="Off" />
                                <Camera Stop="1" />
                                <EndGame Result="Win" Model="Player" Frames="_Time" />
                            </Actions>
                        </Loop>
                        <Loop Name="ToZone2">
                            <Events Template="FreqUsed.Enter" />
                            <Conditions>
                                <Equal Value1="?getBalance[Quests,PowerFailures,Floor]" Value2="{?getCounter[ST_Floor] + 1}" />
                                <Equal Value1="?getCounter[ST_Quests,PowerFailures]" Value2="1" />
                            </Conditions>
                            <Actions>
                                <Control Model="Player" Switch="Off" />
                                <Camera Stop="1" />
                                <Wait Frames="180" />
                                <ExecuteCall Message="PowerFailures" />
                            </Actions>
                        </Loop>
                        <Loop Name="EndGame">
                            <Events>
                                <EndGame />
                            </Events>
                            <Conditions>
                                <Select Object="_#Currency" From="Currency" Section="Stash">
                                    <Equal Value1="?getItemAsGroup[Currency,_#Currency].Type" Value2="_CurrencyType" />
                                </Select>
                            </Conditions>
                            <Actions>
                                <AppendValue Name="?getItemAsGroup[Countable,_#Currency].Quantity" Value="{(_CashResult+_Adder)*(_Multiplier/100+1)}" />
                                <AppendValue Name="?getCounter[MissionProgress, _CurrencyType]" Value="{(_CashResult+_Adder)*(_Multiplier/100+1)}" />
                                <AppendValue Name="?getCounter[GUI, PointsForFloor]" Value="{(_CashResult+_Adder)*(_Multiplier/100+1)}" />
                            </Actions>
                        </Loop>
                    </Content>
                </Trigger>
            </Content>
            <Properties>
                <Static>
                    <ContentVariable>
                        <Variable Name="FloorReward" Default="?getBalance[Floor, Points,?getCounter[ST_Default,ST_Floor]]" />
                        <Variable Name="Time" Default="100" />
                    </ContentVariable>
                </Static>
            </Properties>
        </Object>
        <Object Name="Loss" X="0" Y="0" Label="Trigger">
            <Content>
                <Trigger Name="TriggerLoss" X="0" Y="0" Width="1000" Height="100">
                    <Content>
                        <Init>
                            <SetVariable Name="$Active" Type="Bool" Value="1" />
                            <SetVariable Name="Time" Value="60" />
                            <SetVariable Name="Start" Value="" />
                            <SetVariable Name="ReversedStart" Value="0" />
                            <SetVariable Name="StartFrame" Value="" />
                            <SetVariable Name="$AI" Type="AI" Value="-1" />
                            <SetVariable Name="$Node" Type="Node" Value="COM" />
                            <SetVariable Name="soundName" Type="String" Value="subject_destroyed" />
                            <SetVariable Name="soundText" Type="String" Value="^SoundAnnounce. SubjectDestroyed^" />
                            <SetVariable Name="TextSize" Type="Int" Value="110" />
                            <SetVariable Name="TextColor" Type="String" Value="#FFFFFFFF" />
                            <SetVariable Name="volumeLvl" Type="UInt" Value="100" />
                        </Init>
                        <Template Name="TriggerLoss" />
                    </Content>
                </Trigger>
            </Content>
        </Object>
        <Object Name="WallJump" X="0" Y="0" Label="Trigger">
            <Content>
                <Area Name="WallJump" X="0" Y="0" Width="400" Height="1000" Type="Animation" />
            </Content>
        </Object>
        <Object Name="WallRunFromFail" X="0" Y="0" Label="Trigger">
            <Content>
                <Area Name="WallRunFromFail" X="0" Y="0" Width="150" Height="250" Type="Animation" />
            </Content>
        </Object>
        <Object Name="WallRunFromFailReverse" X="0" Y="0" Label="Trigger">
            <Content>
                <Area Name="WallRunFromFailReverse" X="0" Y="0" Width="150" Height="250" Type="Animation" />
            </Content>
        </Object>
        <Object Name="WallJumpCamera" X="0" Y="0" Label="Trigger">
            <Content>
                <Trigger Name="TriggerWallJumpCamera" X="0" Y="0" Width="300" Height="400">
                    <Content>
                        <Init>
                            <SetVariable Name="$Active" Type="Bool" Value="1" />
                            <SetVariable Name="$Node" Type="Node" Value="COM" />
                            <SetVariable Name="Smoothness" Value="0.65" />
                            <SetVariable Name="$AI" Type="AI" Value="0" />
                        </Init>
                        <Template Name="CameraSmoothness" />
                    </Content>
                </Trigger>
            </Content>
        </Object>
        <Object Name="CrawlingStart" X="0" Y="0" Label="Trigger">
            <Content>
                <Area Name="CrawlingStart" X="0" Y="0" Width="130" Height="150" Type="Animation" />
            </Content>
        </Object>
        <Object Name="CrawlingFinish" X="0" Y="0" Label="Trigger">
            <Content>
                <Area Name="CrawlingFinish" X="0" Y="0" Width="100" Height="150" Type="Animation" />
            </Content>
        </Object>
        <Object Name="CrawlingMiddle" X="0" Y="0" Label="Trigger">
            <Content>
                <Area Name="CrawlingMiddle" X="0" Y="0" Width="250" Height="150" Type="Animation" />
            </Content>
        </Object>
        <Object Name="RunForwardFromFailReverse" X="0" Y="0" Label="Trigger">
            <Content>
                <Area Name="RunForwardFromFailReverse" X="0" Y="0" Width="150" Height="250" Type="Animation" />
            </Content>
        </Object>
        <Object Name="LossPanic" X="0" Y="0" Label="Trigger">
            <Content>
                <Trigger Name="TriggerLossPanic" X="0" Y="0" Width="1000" Height="100">
                    <Content>
                        <Init>
                            <SetVariable Name="$Active" Type="Bool" Value="1" />
                            <SetVariable Name="$Node" Type="Node" Value="COM" />
                            <SetVariable Name="Time" Value="60" />
                            <SetVariable Name="Start" Value="FlyPanic" />
                            <SetVariable Name="StartFrame" Value="1" />
                            <SetVariable Name="ReversedStart" Value="0" />
                            <SetVariable Name="$AI" Type="AI" Value="-1" />
                            <SetVariable Name="soundName" Type="String" Value="subject_destroyed" />
                            <SetVariable Name="soundText" Type="String" Value="^SoundAnnounce. SubjectDestroyed^" />
                            <SetVariable Name="TextSize" Type="Int" Value="110" />
                            <SetVariable Name="TextColor" Type="String" Value="#000000FF" />
                            <SetVariable Name="volumeLvl" Type="UInt" Value="100" />
                        </Init>
                        <Template Name="TriggerLoss" />
                    </Content>
                </Trigger>
            </Content>
        </Object>
        <Object Name="NoWallRun" X="0" Y="0">
            <Content>
                <Area Name="NoWallRun" X="0" Y="0" Width="200" Height="220" Type="Animation" />
            </Content>
        </Object>
        <Object Name="NoWallRunLong" X="0" Y="0">
            <Content>
                <Area Name="NoWallRun" X="0" Y="0" Width="138" Height="663" Type="Animation" />
            </Content>
            <Properties>
                <Static>
                    <Enable Value="~Enable" />
                    <ContentVariable>
                        <Variable Name="Enable" Type="E_Bool" Default="1" AvailableTypes="E_Bool" />
                    </ContentVariable>
                </Static>
            </Properties>
        </Object>
        <Object Name="JumpToEdge" X="0" Y="0">
            <Content>
                <Area Name="JumpToEdge" X="0" Y="0" Width="100" Height="200" Type="Animation" />
            </Content>
        </Object>
        <Object Name="RunReverseFromInhibition" X="0" Y="0">
            <Content>
                <Area Name="RunReverseFromInhibition" X="0" Y="0" Width="100" Height="200" Type="Animation" />
            </Content>
        </Object>
        <Object Name="StuntIcon" X="0" Y="0">
            <Content>
                <Object Name="StuntBanner" X="0" Y="0">
                    <Content>
                        <Image ClassName="~BannerMain" X="0" Y="45" Layer="Shadows" Width="136" Height="146" Factor="0">
                            <Properties>
                                <Static>
                                    <BlendMode Mode="Multiply" />
                                    <Matrix A="136" B="0" C="0" D="146" Tx="0" Ty="0" />
                                </Static>
                            </Properties>
                        </Image>
                        <Image ClassName="~BannerTop" X="-136" Y="-101" Layer="Shadows" Width="136" Height="146" Factor="0">
                            <Properties>
                                <Static>
                                    <BlendMode Mode="Multiply" />
                                    <Matrix A="136" B="0" C="0" D="146" Tx="136" Ty="0" />
                                </Static>
                            </Properties>
                        </Image>
                        <Image ClassName="~BannerMainLinearDodge" X="0" Y="49" Layer="StuntsLinearDodge" Width="136" Height="146" Factor="0">
                            <Properties>
                                <Static>
                                    <StartColor Color="#FFFFFF70" />
                                    <BlendMode Mode="LinearDodge" />
                                    <Matrix A="136" B="0" C="0" D="146" Tx="0" Ty="0" />
                                </Static>
                            </Properties>
                        </Image>
                        <Image ClassName="~BannerTopLinearDodge" X="-136" Y="-97" Layer="StuntsLinearDodge" Width="136" Height="146" Factor="0">
                            <Properties>
                                <Static>
                                    <StartColor Color="#FFFFFF70" />
                                    <BlendMode Mode="LinearDodge" />
                                    <Matrix A="136" B="0" C="0" D="146" Tx="136" Ty="0" />
                                </Static>
                            </Properties>
                        </Image>
                    </Content>
                    <Properties>
                        <Dynamic>
                            <Transformation Name="BannerFadeOut">
                                <ColorInterval ColorFinish="#FFFFFF00" Frames="20" ColorStart="#FFFFFFFF" />
                            </Transformation>
                        </Dynamic>
                    </Properties>
                </Object>
                <Image ClassName="stunts_run.banner_arrow" X="45" Y="10" Layer="Stunts" Width="40" Height="23" Factor="0">
                    <Properties>
                        <Static>
                            <Matrix A="40" B="0" C="0" D="23" Tx="0" Ty="0" />
                        </Static>
                        <Dynamic>
                            <Transformation Name="blink">
                                <MoveInterval Frames="40" Type="Bezier">
                                    <Point X="0" Y="0" />
                                    <Point X="0" Y="-30" />
                                    <Point X="0" Y="-30" />
                                </MoveInterval>
                                <MoveInterval Frames="40" Type="Bezier">
                                    <Point X="0" Y="0" />
                                    <Point X="0" Y="30" />
                                    <Point X="0" Y="30" />
                                </MoveInterval>
                            </Transformation>
                            <Transformation Name="BannerFadeOut">
                                <ColorInterval ColorFinish="#FFFFFF00" Frames="20" ColorStart="#FFFFFFFF" />
                            </Transformation>
                        </Dynamic>
                    </Properties>
                </Image>
                <Image ClassName="~ImageName" X="25" Y="33" Layer="Stunts" Width="89" Height="89" Factor="0">
                    <Properties>
                        <Static>
                            <Matrix A="89" B="0" C="0" D="89" Tx="0" Ty="0" />
                        </Static>
                        <Dynamic>
                            <Transformation Name="BannerFadeOut">
                                <ColorInterval ColorFinish="#FFFFFF00" Frames="20" ColorStart="#FFFFFFFF" />
                            </Transformation>
                        </Dynamic>
                    </Properties>
                </Image>
                <Trigger Name="StuntSequencer" X="0" Y="0" Width="10" Height="10">
                    <Content>
                        <Init>
                            <SetVariable Name="$AI" Type="AI" Value="0" />
                            <SetVariable Name="$Active" Type="Bool" Value="1" />
                            <SetVariable Name="$Node" Type="Node" Value="COM" />
                            <SetVariable Name="Animate" Type="Bool" Value="0" />
                        </Init>
                        <Loop Name="ActivateActive">
                            <Events>
                                <Activate />
                            </Events>
                            <Conditions>
                                <Equal Value1="_$ActionID" Value2="ExecuteActive" />
                            </Conditions>
                            <Actions>
                                <Transform Name="blink" />
                            </Actions>
                        </Loop>
                        <Loop Name="OnShowActivateIdle">
                            <Events>
                                <OnShow />
                            </Events>
                            <Actions>
                                <SetVariable Name="Animate" Value="1" />
                                <Activate ActionID="Animate" />
                            </Actions>
                        </Loop>
                        <Loop>
                            <Events>
                                <Activate />
                            </Events>
                            <Conditions>
                                <Equal Value1="_$ActionID" Value2="Animate" />
                                <Equal Value1="_Animate" Value2="1" />
                            </Conditions>
                            <Actions>
                                <Transform Name="blink" />
                                <Activate ActionID="Animate" />
                            </Actions>
                        </Loop>
                        <Loop>
                            <Events>
                                <Activate />
                            </Events>
                            <Conditions>
                                <Equal Value1="_$ActionID" Value2="BannerFadeOut" />
                            </Conditions>
                            <Actions>
                                <Transform Name="BannerFadeOut" />
                            </Actions>
                        </Loop>
                        <Loop>
                            <Events>
                                <OnHide />
                            </Events>
                            <Actions>
                                <SetVariable Name="Animate" Value="0" />
                            </Actions>
                        </Loop>
                    </Content>
                </Trigger>
            </Content>
            <Properties>
                <Static>
                    <ContentVariable>
                        <Variable Name="ImageName" Default="TRACK_TRICK_ROCKETVAULT" />
                        <Variable Name="Rarity" Default="1" />
                        <Expression Name="BannerTop" Value="?concat['traps_shadows.banner_%1_top', ~Rarity]" />
                        <Expression Name="BannerMain" Value="?concat['traps_shadows.banner_%1_main', ~Rarity]" />
                        <Expression Name="BannerTopLinearDodge" Value="?concat['stunts_run.banner_%1_top', ~Rarity]" />
                        <Expression Name="BannerMainLinearDodge" Value="?concat['stunts_run.banner_%1_main', ~Rarity]" />
                    </ContentVariable>
                </Static>
                <Dynamic>
                    <Transformation Name="SwitchOff">
                        <ActivationInterval Type="Off" />
                    </Transformation>
                </Dynamic>
            </Properties>
        </Object>
        <Object Name="StuntLock" X="0" Y="0">
            <Content>
                <Object Name="LockIcon" X="15" Y="30">
                    <Content>
                        <Object Name="StuntBanner" X="0" Y="0">
                            <Content>
                                <Image ClassName="~BannerMain" X="0" Y="45" Layer="Shadows" Width="136" Height="126" Factor="0">
                                    <Properties>
                                        <Static>
                                            <BlendMode Mode="Multiply" />
                                            <Matrix A="136" B="0" C="0" D="126" Tx="0" Ty="0" />
                                        </Static>
                                    </Properties>
                                </Image>
                                <Image ClassName="~BannerTop" X="-136" Y="-81" Layer="Shadows" Width="136" Height="126" Factor="0">
                                    <Properties>
                                        <Static>
                                            <BlendMode Mode="Multiply" />
                                            <Matrix A="136" B="0" C="0" D="126" Tx="136" Ty="0" />
                                        </Static>
                                    </Properties>
                                </Image>
                                <Image ClassName="~BannerMainLinearDodge" X="0" Y="45" Layer="StuntsLinearDodge" Width="136" Height="126" Factor="0">
                                    <Properties>
                                        <Static>
                                            <StartColor Color="#FFFFFF70" />
                                            <BlendMode Mode="LinearDodge" />
                                            <Matrix A="136" B="0" C="0" D="126" Tx="0" Ty="0" />
                                        </Static>
                                    </Properties>
                                </Image>
                                <Image ClassName="~BannerTopLinearDodge" X="-136" Y="-81" Layer="StuntsLinearDodge" Width="136" Height="126" Factor="0">
                                    <Properties>
                                        <Static>
                                            <StartColor Color="#FFFFFF70" />
                                            <BlendMode Mode="LinearDodge" />
                                            <Matrix A="136" B="0" C="0" D="126" Tx="136" Ty="0" />
                                        </Static>
                                    </Properties>
                                </Image>
                            </Content>
                        </Object>
                        <Image ClassName="stunts_run.stunt_lock" X="36" Y="33" Layer="Stunts" Width="61" Height="73" Factor="0">
                            <Properties>
                                <Static>
                                    <Matrix A="61" B="0" C="0" D="73" Tx="0" Ty="0" />
                                </Static>
                                <Dynamic>
                                    <Transformation Name="LockMainAimation">
                                        <ColorInterval ColorFinish="#FFFFFF66" Frames="10" ColorStart="#FFFFFFFF" />
                                        <MoveInterval Frames="5" Type="Bezier">
                                            <Point X="0" Y="0" />
                                            <Point X="-20" Y="0" />
                                        </MoveInterval>
                                        <MoveInterval Frames="5" Type="Bezier">
                                            <Point X="0" Y="0" />
                                            <Point X="40" Y="0" />
                                        </MoveInterval>
                                        <MoveInterval Frames="5" Type="Bezier">
                                            <Point X="0" Y="0" />
                                            <Point X="-40" Y="0" />
                                        </MoveInterval>
                                        <MoveInterval Frames="5" Type="Bezier">
                                            <Point X="0" Y="0" />
                                            <Point X="20" Y="0" />
                                        </MoveInterval>
                                        <ColorInterval ColorFinish="#FFFFFFFF" Frames="10" />
                                    </Transformation>
                                </Dynamic>
                            </Properties>
                        </Image>
                    </Content>
                </Object>
                <Trigger Name="ErrorMessage" X="0" Y="0" Width="150" Height="200">
                    <Content>
                        <Init>
                            <SetVariable Name="$AI" Type="AI" Value="0" />
                            <SetVariable Name="$Active" Type="Bool" Value="1" />
                            <SetVariable Name="$Node" Type="Node" Value="COM" />
                            <SetVariable Name="IsActive" Type="Bool" Value="1" />
                        </Init>
                        <Loop>
                            <Events>
                                <KeyPressed />
                            </Events>
                            <Conditions>
                                <Equal Value1="_IsActive" Value2="1" />
                                <Equal Value1="_$Key" Value2="Up" />
                            </Conditions>
                            <Actions>
                                <SetVariable Name="IsActive" Value="0" />
                                <FloatingText Text="^Stunts.StuntDetails.NoStunt^" Color="#CB4444FF" Size="110" Frames="120" Delay="30" OriginType="Screen" OffsetY="0.15" ShiftY="0.1" />
                                <Choose Order="Sync" Set="0">
                                    <Transform Name="LockMainAimation" />
                                    <Transform Name="LockBgAimation" />
                                    <Transform Name="LockBorderAimation" />
                                    <Sound Name="stunt_fail" Volume="1" />
                                </Choose>
                            </Actions>
                        </Loop>
                    </Content>
                </Trigger>
            </Content>
            <Properties>
                <Static>
                    <ContentVariable>
                        <Variable Name="Rarity" Default="1" />
                        <Expression Name="LockMainImage" Value="?concat['stunt_icons_%1.lock_main', ~Rarity]" />
                        <Expression Name="StuntBgImage" Value="?concat['stunt_icons_%1.stunt_bg', ~Rarity]" />
                        <Expression Name="LockEndColor" Value="?switch[~Rarity, 2:#FBBB8AD0, #666666DD]" />
                        <Expression Name="BannerTop" Value="?concat['traps_shadows.banner_%1_top', ~Rarity]" />
                        <Expression Name="BannerMain" Value="?concat['traps_shadows.banner_%1_main', ~Rarity]" />
                        <Expression Name="BannerTopLinearDodge" Value="?concat['stunts_run.banner_%1_top', ~Rarity]" />
                        <Expression Name="BannerMainLinearDodge" Value="?concat['stunts_run.banner_%1_main', ~Rarity]" />
                    </ContentVariable>
                </Static>
            </Properties>
        </Object>
        <Object Name="Stunt" X="0" Y="0">
            <Content>
                <Placeholder Name="" X="0" Y="0" Sorted="~Sorted">
                    <Properties>
                        <CounterActions>
                            <OnEnter>
                                <Assign Name="Stunt" Namespace="Placeholder" Value="1" />
                                <Assign Name="TrickLockNoKey" Namespace="Placeholder" Value="~TrickLockNoKey" />
                                <Assign Name="TrickLockWithKey" Namespace="Placeholder" Value="~TrickLockWithKey" />
                                <Assign Name="StuntUp" Namespace="Placeholder" Value="~StuntUp" />
                                <Assign Name="StuntDown" Namespace="Placeholder" Value="~StuntDown" />
                                <Assign Name="StuntReward" Namespace="Placeholder" Value="~StuntReward" />
                                <Assign Name="TrickLocklessFork" Namespace="Placeholder" Value="~TrickLocklessFork" />
                            </OnEnter>
                            <OnExit>
                                <Clear Name="Stunt" Namespace="Placeholder" />
                                <Clear Name="TrickLockNoKey" Namespace="Placeholder" />
                                <Clear Name="TrickLockWithKey" Namespace="Placeholder" />
                                <Clear Name="StuntUp" Namespace="Placeholder" />
                                <Clear Name="StuntDown" Namespace="Placeholder" />
                                <Clear Name="StuntReward" Namespace="Placeholder" />
                                <Clear Name="TrickLocklessFork" Namespace="Placeholder" />
                            </OnExit>
                        </CounterActions>
                        <StringActions>
                            <OnEnter>
                                <StringAction Name="PreferedStunt" Value="~PreferedStunt" />
                                <StringAction Name="StuntGroup" Value="~StuntGroup" />
                                <StringAction Name="StuntName" Value="~StuntName" />
                            </OnEnter>
                            <OnExit>
                                <StringAction Name="PreferedStunt" Value="" />
                                <StringAction Name="StuntGroup" Value="" />
                                <StringAction Name="StuntName" Value="" />
                            </OnExit>
                        </StringActions>
                    </Properties>
                </Placeholder>
                <Image ClassName="stunt_icons_1.track_trick_screwdriver" X="28" Y="82" Layer="Sequences" Width="91" Height="91" Factor="0" Phantom="1">
                    <Properties>
                        <Static>
                            <Matrix A="91" B="0" C="0" D="91" Tx="0" Ty="0" />
                        </Static>
                    </Properties>
                </Image>
                <ObjectReference Name="~StuntGroup" X="0" Y="200" Filename="phantoms.xml" Phantom="1" />
            </Content>
            <Properties>
                <Static>
                    <ContentVariable>
                        <Variable Name="Sorted" Type="E_String" Default="None" AvailableTypes="E_String" />
                        <Variable Name="TrickLockNoKey" Type="E_Bool" Default="0" AvailableTypes="E_Bool" />
                        <Variable Name="TrickLockWithKey" Type="E_Bool" Default="0" AvailableTypes="E_Bool" />
                        <Variable Name="StuntUp" Type="E_Bool" Default="0" AvailableTypes="E_Bool" />
                        <Variable Name="StuntDown" Type="E_Bool" Default="0" AvailableTypes="E_Bool" />
                        <Variable Name="StuntReward" Type="E_Bool" Default="0" AvailableTypes="E_Bool" />
                        <Variable Name="TrickLocklessFork" Type="E_Bool" Default="0" AvailableTypes="E_Bool" />
                        <Variable Name="StuntName" Type="E_AreaTrick" Default="JumpObstacle" AvailableTypes="E_Group1-1|E_Group1-2|E_Group1-3|E_Group1-4|E_Group1-5|E_Group1-6|E_Group1-7|E_Group1-8|E_Group1-9|E_Group2-1|E_Group2-2|E_Group2-3|E_Group3-1|E_Group3-2|E_Group3-3|E_Group3-4|E_Group3-5|E_Group4|E_Group5|E_AreaTrick|E_String" />
                        <Variable Name="PreferedStunt" Type="E_AreaTrick" Default="None" AvailableTypes="E_Group1-1|E_Group1-2|E_Group1-3|E_Group1-4|E_Group1-5|E_Group1-6|E_Group1-7|E_Group1-8|E_Group1-9|E_Group2-1|E_Group2-2|E_Group2-3|E_Group3-1|E_Group3-2|E_Group3-3|E_Group3-4|E_Group3-5|E_Group4|E_Group5|E_AreaTrick|E_String" />
                        <Expression Name="StuntGroup" Value="?getBalance[Stunts, StuntGroups, ~StuntName, Group]" />
                        <Expression Name="StuntExist" Value="?switch[~StuntGroup, Group1-1: 1, Group1-5: 1, Group3-1: 1, 0]" />
                        <Expression Name="StuntZone2Exist" Value="?switch[~StuntGroup, Group1-1: 1, Group1-3: 1, Group1-5: 1, Group1-6: 1, Group2-1: 1, Group3-1: 1, Group4: 1, Group5: 1, 0]" />
                    </ContentVariable>
                    <GeneratorLabel Name="Stunt" Value="~StuntExist" />
                    <GeneratorLabel Name="StuntZone2" Value="~StuntZone2Exist" />
                    <GeneratorLabel Name="~StuntName" Value="1" />
                    <GeneratorLabel Name="~StuntGroup" Value="1" />
                </Static>
            </Properties>
        </Object>
        <Object Name="TutorialTrigger" X="0" Y="0">
            <Content>
                <Trigger Name="Tutorial" X="0" Y="0" Width="~Width" Height="~Height">
                    <Content>
                        <Init>
                            <SetVariable Name="$Active" Type="Bool" Value="1" />
                            <SetVariable Name="$Node" Type="Node" Value="COM" />
                            <SetVariable Name="$AI" Type="AI" Value="0" />
                            <SetVariable Name="Key" Value="~Key" />
                            <SetVariable Name="KeyAlreadyPressed" Value="0" />
                            <SetVariable Name="WasAlreadyLocked" Value="0" />
                            <SetVariable Name="Entered" Type="Bool" Value="0" />
                            <SetVariable Name="Timer" Type="Bool" Value="~LockTimer" />
                        </Init>
                        <Loop Name="Show text and set timer">
                            <Events>
                                <Enter />
                            </Events>
                            <Actions>
                                <SetTimer Frames="_Timer" />
                                <SetVariable Name="Entered" Value="1" />
                                <Tutorial Key="_Key" TextMobile="~TextMobile" TextKeyboard="~TextKeyboard" LockGame="0" />
                            </Actions>
                            <Conditions>
                                <Equal Value1="_Entered" Value2="0" />
                            </Conditions>
                        </Loop>
                        <Loop Name="LockGame if timer not zero">
                            <Events>
                                <Timeout />
                            </Events>
                            <Conditions>
                                <Equal Value1="_WasAlreadyLocked" Value2="0" />
                                <Greater Value1="_Timer" Value2="0" />
                            </Conditions>
                            <Actions>
                                <SetVariable Name="WasAlreadyLocked" Value="1" />
                                <Tutorial LockGame="1" />
                            </Actions>
                        </Loop>
                        <Loop Name="LockGame on exit if it wasn't locked before">
                            <Events>
                                <Exit />
                            </Events>
                            <Conditions>
                                <Equal Value1="_WasAlreadyLocked" Value2="0" />
                            </Conditions>
                            <Actions>
                                <SetVariable Name="WasAlreadyLocked" Value="1" />
                                <Tutorial LockGame="1" />
                            </Actions>
                        </Loop>
                        <Loop Name="CtrlOn on exit if right key was pressed">
                            <Events>
                                <Exit />
                            </Events>
                            <Conditions>
                                <Equal Value1="_KeyAlreadyPressed" Value2="1" />
                            </Conditions>
                            <Actions>
                                <Control Model="Player" Switch="On" />
                            </Actions>
                        </Loop>
                        <Loop Name="CtrlOff if right key was pressed">
                            <Events>
                                <KeyPressed />
                            </Events>
                            <Conditions>
                                <Equal Value1="_$Key" Value2="_Key" />
                            </Conditions>
                            <Actions>
                                <Wait Frames="1" />
                                <Control Model="Player" Switch="Off" />
                                <SetVariable Name="KeyAlreadyPressed" Value="1" />
                            </Actions>
                        </Loop>
                    </Content>
                </Trigger>
            </Content>
            <Properties>
                <Static>
                    <ContentVariable>
                        <Variable Name="Key" Default="Up" />
                        <Variable Name="TextMobile" Default="^Tutorial.FirstFloor.Mobile.Jump.Line1^(nl)^Tutorial.FirstFloor.Mobile.Jump.Line2^" />
                        <Variable Name="TextKeyboard" Default="^Tutorial.FirstFloor.PC.Jump.Line1^(nl)(nl)^Tutorial.FirstFloor.PC.Jump.Line2^" />
                        <Variable Name="Height" Default="200" />
                        <Variable Name="Width" Default="100" />
                        <Variable Name="LockTimer" Default="0" />
                    </ContentVariable>
                </Static>
            </Properties>
        </Object>
        <Object Name="GlobalTimerController" X="0" Y="0">
            <Content>
                <Trigger Name="TimerStart" X="0" Y="0" Width="100" Height="600">
                    <Content>
                        <Init>
                            <SetVariable Name="$Active" Type="Bool" Value="1" />
                            <SetVariable Name="$Node" Type="Node" Value="COM" />
                            <SetVariable Name="$AI" Type="AI" Value="0" />
                            <SetVariable Name="Effect" Value="BurnLaser" />
                            <SetVariable Name="BaseFrames" Value="?getBalance[Floor, GlobalTimer, BaseTime, ?getCounter[ST_Default,ST_Floor]]" />
                        </Init>
                        <Loop Name="GlobalTimerStart">
                            <Events>
                                <Enter />
                            </Events>
                            <Actions>
                                <GlobalTimer Action="Increment" Frames="_BaseFrames" />
                            </Actions>
                        </Loop>
                        <Loop Name="TimerEndDeath">
                            <Conditions>
                                <Equal Value1="0" Value2="?getCounter[Debug, NoTimerDeath]" />
                            </Conditions>
                            <Events>
                                <OnGlobalTimer />
                            </Events>
                            <Actions>
                                <RunModelEffect Name="_Effect" Model="Player" />
                                <Sound Name="subject_destroyed" Volume="1" />
                                <EndGame Result="Death" Model="Player" Frames="60" />
                                <FloatingText Text="^SoundAnnounce.SubjectDestroyed^" Color="#FFFFFFFF" Size="80" Frames="60" Delay="30" OriginType="Subtitles" OffsetY="{?getCounter[GUI,SubtitlesNumber]*0.15}" />
                                <AppendValue Name="?getCounter[GUI,SubtitlesNumber]" Value="1" />
                                <Wait Frames="60" />
                                <AppendValue Name="?getCounter[GUI,SubtitlesNumber]" Value="-1" />
                            </Actions>
                        </Loop>
                    </Content>
                </Trigger>
            </Content>
            <Properties>
                <Static>
                    <Enable Value="~IsEnable" />
                    <ContentVariable>
                        <Expression Name="IsEnable" Value="?getCounter[ST_Generator, ST_TimerEnabled]" />
                    </ContentVariable>
                </Static>
            </Properties>
        </Object>
        <Object Name="PauseTimer" X="0" Y="0" Label="Trigger">
            <Content>
                <Trigger Name="PauseTimer" X="0" Y="0" Width="100" Height="3500">
                    <Content>
                        <Init>
                            <SetVariable Name="$Active" Type="Bool" Value="1" />
                            <SetVariable Name="$Node" Type="Node" Value="COM" />
                            <SetVariable Name="$AI" Type="AI" Value="0" />
                        </Init>
                        <Loop Name="">
                            <Events>
                                <Enter />
                            </Events>
                            <Actions>
                                <GlobalTimer Action="Pause" />
                            </Actions>
                        </Loop>
                    </Content>
                </Trigger>
            </Content>
            <Properties>
                <Static>
                    <Enable Value="~IsEnable" />
                    <ContentVariable>
                        <Expression Name="IsEnable" Value="?getCounter[ST_Generator, ST_TimerEnabled]" />
                    </ContentVariable>
                </Static>
            </Properties>
        </Object>
        <Object Name="StuntReal" X="0" Y="0">
            <Content>
                <ObjectReference Name="StuntIcon" X="15" Y="30" Filename="triggers.xml">
                    <Properties>
                        <Static>
                            <OverrideVariable>
                                <Variable Name="ImageName" Value="~ImageName" />
                                <Variable Name="Rarity" Value="~Rarity" />
                            </OverrideVariable>
                        </Static>
                    </Properties>
                </ObjectReference>
                <Area Name="~StuntName" X="0" Y="0" Width="150" Height="200" Type="Trick" />
                <Trigger Name="AddPoints" X="0" Y="0" Width="170" Height="200">
                    <Content>
                        <Init>
                            <SetVariable Name="$AI" Type="AI" Value="0" />
                            <SetVariable Name="$Active" Type="Bool" Value="1" />
                            <SetVariable Name="$Node" Type="Node" Value="COM" />
                            <SetVariable Name="#Currency" Value="None" />
                            <SetVariable Name="CurrencyType" Value="Points" />
                            <SetVariable Name="#Gadget" Value="None" />
                            <SetVariable Name="CashEV" Value="~CoinValueEV" />
                            <SetVariable Name="Cash1" Value="{1 * _CashEV}" />
                            <SetVariable Name="Cash2" Value="{1 * _CashEV}" />
                            <SetVariable Name="CashResult" Value="0" />
                            <SetVariable Name="CashCounter" Value="MaxPoints" />
                            <SetVariable Name="Adder" Value="?getCounter[PassiveEffects, AddPoints]" />
                            <SetVariable Name="Multiplier" Value="?getCounter[PassiveEffects, PointsAddPercentage]" />
                            <SetVariable Name="TextColor" Value="#41C2E2FF" />
                            <SetVariable Name="TextSize" Value="118" />
                            <SetVariable Name="StuntTextSize" Value="110" />
                            <SetVariable Name="StuntText" Value="~StuntText" />
                            <SetVariable Name="IconImage" Value="common.money1_icon" />
                            <SetVariable Name="IconImageWidth" Value="150" />
                            <SetVariable Name="IconImageHeight" Value="150" />
                            <SetVariable Name="IconImageColor" Value="blue" />
                            <SetVariable Name="PointsTextDelay" Value="0" />
                            <SetVariable Name="ReqAnim" Value="~CurrentStuntAnimation" />
                            <SetVariable Name="Sound" Value="~sound_name" />
                            <SetVariable Name="Volume" Value="1" />
                            <SetVariable Name="EffectID" Value="EffectStuntExtraReward" />
                            <SetVariable Name="ExtraCash" Value="0" />
                            <SetVariable Name="ExtraCashMultiplier" Value="0" />
                            <SetVariable Name="MultipliedExtraCash" Value="" DefaultValue="0" />
                            <SetVariable Name="EffectImage" Value="common.effect_extra_money1" />
                            <SetVariable Name="ShiftY" Value="-500" />
                            <SetVariable Name="StuntName" Value="~StuntName" />
                            <SetVariable Name="CardName" Value="~CardName" />
                            <SetVariable Name="RarityName" Value="~RarityName" />
                            <SetVariable Name="FT_Stunts_Color" Value="~FT_Stunts_Color" />
                        </Init>
                        <Loop>
                            <Events Template="CurrencyService.StuntLauncher" />
                            <Conditions Template="CurrencyService.StuntLauncher" />
                            <Actions>
                                <Sound Name="_Sound" Volume="_Volume" DuckEffect="1" />
                                <ActionBlock Template="CurrencyService.StuntLauncher" />
                                <Activate ActionID="BannerFadeOut" />
                                <Activate ActionID="ExecuteActive" />
                                <Wait Frames="30" />
                                <Transform Name="SwitchOff" />
                            </Actions>
                        </Loop>
                        <Loop Template="CurrencyService.ShowStuntText" />
                        <Loop Template="CurrencyService.ShowCurrencyIncome" />
                        <Loop Template="GiveMeMyCurrency.AddQuantityCommon" />
                        <Loop Template="GiveMeMyCurrency.AddQuantityRaw" />
                        <Loop>
                            <Events>
                                <Activate />
                            </Events>
                            <Conditions>
                                <Equal Value1="_$ActionID" Value2="ExecuteActive" />
                            </Conditions>
                            <Actions>
                                <AppendValue Name="?getCounter[GUI,StuntsExecuted]" Value="1" />
                                <AppendValue Name="?getCounter[GUI,PointsForStunts]" Value="_CashResult" />
                                <AppendValue Name="?getCounter[ST_Statistics_Stunts_Collected, _CardName]" Value="1" />
                                <AppendValue Name="?getCounter[ST_Statistics_Stunts_Collected, _RarityName]" Value="1" />
                                <AppendValue Name="?getCounter[AchievementsProgressByRun, TricksByRun]" Value="1" />
                                <SetVariable Name="?getCounter[AchievementsProgressByFloor, Money1ByTrick]" Value="_CashResult" />
                            </Actions>
                        </Loop>
                        <Loop Template="GiveMeMyCurrency.TriggerOff" />
                    </Content>
                </Trigger>
                <Trigger Name="CountStunts" X="0" Y="-300" Width="170" Height="500">
                    <Content>
                        <Init>
                            <SetVariable Name="$AI" Type="AI" Value="0" />
                            <SetVariable Name="$Active" Type="Bool" Value="1" />
                            <SetVariable Name="$Node" Type="Node" Value="COM" />
                        </Init>
                        <Loop>
                            <Events>
                                <Enter />
                            </Events>
                            <Actions>
                                <AppendValue Name="?getCounter[GUI,StuntsExecutable]" Value="1" />
                                <SetVariable Name="$Active" Value="0" />
                            </Actions>
                        </Loop>
                    </Content>
                </Trigger>
            </Content>
            <Properties>
                <Static>
                    <ContentVariable>
                        <Variable Name="StuntName" Type="E_AreaTrick" Default="JumpObstacle" AvailableTypes="E_Group1|E_Group2|E_Group3|E_Group4|E_Group5|E_AreaTrick|E_String" />
                        <Variable Name="CardName" Default="JumpObstacle_1" />
                        <Constant Name="RarityName" Default="blue_count" />
                        <Expression Name="StuntText" Value="^Stunts.StuntDetails.~StuntName.StuntVisualItemName^" />
                        <Expression Name="CoinValueEV" Value="?getCardInfo[~CardName,Vars,Points]" />
                        <Expression Name="Rarity" Value="?getCardInfo[~CardName,Stats,Rarity]" />
                        <Expression Name="FT_Stunts_Color" Value="?getBalance[Stunts,ColorByRarity,~Rarity]" />
                        <Expression Name="ImageName" Value="?concat['stunts_run.%1', ?getCardInfo[~CardName,Stats,RunImage]]" />
                        <Expression Name="CurrentStuntAnimation" Value="~StuntName" />
                        <Expression Name="sound_name" Value="?concat['stunt_%1', ~Rarity]" />
                    </ContentVariable>
                </Static>
            </Properties>
        </Object>
        <Object Name="TutorLockedStunt" X="0" Y="0">
            <Content>
                <Object Name="LockIcon" X="15" Y="30">
                    <Content>
                        <Object Name="" X="-7" Y="47">
                            <Content>
                                <Object Name="StuntBanner" X="0" Y="0">
                                    <Content>
                                        <Image ClassName="traps_shadows.banner_1_main" X="0" Y="45" Layer="Shadows" Width="136" Height="126" Factor="0">
                                            <Properties>
                                                <Static>
                                                    <BlendMode Mode="Multiply" />
                                                    <Matrix A="136" B="0" C="0" D="126" Tx="0" Ty="0" />
                                                </Static>
                                            </Properties>
                                        </Image>
                                        <Image ClassName="traps_shadows.banner_1_top" X="-136" Y="-81" Layer="Shadows" Width="136" Height="126" Factor="0">
                                            <Properties>
                                                <Static>
                                                    <BlendMode Mode="Multiply" />
                                                    <Matrix A="136" B="0" C="0" D="126" Tx="136" Ty="0" />
                                                </Static>
                                            </Properties>
                                        </Image>
                                        <Image ClassName="stunts_run.banner_1_main" X="0" Y="45" Layer="StuntsLinearDodge" Width="136" Height="126" Factor="0">
                                            <Properties>
                                                <Static>
                                                    <StartColor Color="#FFFFFF70" />
                                                    <BlendMode Mode="LinearDodge" />
                                                    <Matrix A="136" B="0" C="0" D="126" Tx="0" Ty="0" />
                                                </Static>
                                            </Properties>
                                        </Image>
                                        <Image ClassName="stunts_run.banner_1_top" X="-136" Y="-81" Layer="StuntsLinearDodge" Width="136" Height="126" Factor="0">
                                            <Properties>
                                                <Static>
                                                    <StartColor Color="#FFFFFF70" />
                                                    <BlendMode Mode="LinearDodge" />
                                                    <Matrix A="136" B="0" C="0" D="126" Tx="136" Ty="0" />
                                                </Static>
                                            </Properties>
                                        </Image>
                                    </Content>
                                </Object>
                                <Image ClassName="stunts_run.stunt_lock" X="36" Y="9" Layer="Stunts" Width="61" Height="73" Factor="0">
                                    <Properties>
                                        <Static>
                                            <Matrix A="61" B="0" C="0" D="73" Tx="0" Ty="0" />
                                        </Static>
                                        <Dynamic>
                                            <Transformation Name="LockMainAimation">
                                                <ColorInterval ColorFinish="#FFFFFF66" Frames="10" ColorStart="#FFFFFFFF" />
                                                <MoveInterval Frames="5" Type="Bezier">
                                                    <Point X="0" Y="0" />
                                                    <Point X="-20" Y="0" />
                                                </MoveInterval>
                                                <MoveInterval Frames="5" Type="Bezier">
                                                    <Point X="0" Y="0" />
                                                    <Point X="40" Y="0" />
                                                </MoveInterval>
                                                <MoveInterval Frames="5" Type="Bezier">
                                                    <Point X="0" Y="0" />
                                                    <Point X="-40" Y="0" />
                                                </MoveInterval>
                                                <MoveInterval Frames="5" Type="Bezier">
                                                    <Point X="0" Y="0" />
                                                    <Point X="20" Y="0" />
                                                </MoveInterval>
                                                <ColorInterval ColorFinish="#FFFFFFFF" Frames="10" />
                                            </Transformation>
                                        </Dynamic>
                                    </Properties>
                                </Image>
                            </Content>
                        </Object>
                    </Content>
                </Object>
                <Trigger Name="ErrorMessage" X="0" Y="0" Width="150" Height="200">
                    <Content>
                        <Init>
                            <SetVariable Name="$AI" Type="AI" Value="0" />
                            <SetVariable Name="$Active" Type="Bool" Value="1" />
                            <SetVariable Name="$Node" Type="Node" Value="COM" />
                            <SetVariable Name="IsActive" Type="Bool" Value="1" />
                        </Init>
                        <Loop>
                            <Events>
                                <Enter />
                            </Events>
                            <Conditions>
                                <Equal Value1="_IsActive" Value2="1" />
                            </Conditions>
                            <Actions>
                                <SetVariable Name="IsActive" Value="0" />
                                <Choose Order="Sync" Set="0">
                                    <Transform Name="LockMainAimation" />
                                    <Transform Name="LockBgAimation" />
                                    <Transform Name="LockBorderAimation" />
                                    <Sound Name="tutor_stunt_unknown" Volume="1" />
                                    <Choose Order="Straight" Set="0">
                                        <FloatingText Text="^SoundAnnounce.TutorStuntLocked1^" Color="#FFFFFFFF" Size="80" Frames="90" Delay="30" OriginType="Screen" OffsetY="0.15" ShiftY="0.1" />
                                        <Wait Frames="145" />
                                        <FloatingText Text="^SoundAnnounce.TutorStuntLocked2^" Color="#FFFFFFFF" Size="80" Frames="90" Delay="30" OriginType="Screen" OffsetY="0.15" ShiftY="0.1" />
                                    </Choose>
                                </Choose>
                            </Actions>
                        </Loop>
                    </Content>
                </Trigger>
                <Trigger Name="statistics" X="0" Y="0" Width="150" Height="200">
                    <Content>
                        <Init>
                            <SetVariable Name="$AI" Type="AI" Value="0" />
                            <SetVariable Name="$Active" Type="Bool" Value="1" />
                            <SetVariable Name="$Node" Type="Node" Value="COM" />
                        </Init>
                        <Loop>
                            <Events>
                                <KeyPressed />
                            </Events>
                            <Conditions>
                                <Equal Value1="_$Key" Value2="Up" />
                            </Conditions>
                            <Actions>
                                <Statistics SignalMessage="tutor_2nd_floor_jump_on_locked_stunt" />
                            </Actions>
                        </Loop>
                    </Content>
                </Trigger>
            </Content>
        </Object>
        <Object Name="SavemePoint" X="0" Y="0">
            <Content>
                <Comment Text="Saveme" X="0" Y="0" Size="32" Width="70" Height="70" Color="#00DDDDFF" />
                <Spawn Name="SavemeSpawn" X="0" Y="8" Animation="StandAfterInhibition|56" />
                <ObjectReference Name="RunFromInhibition" X="-50" Y="-130" Filename="triggers.xml" />
                <ObjectReference Name="TeleportOut" X="0" Y="0" Filename="triggers.xml" />
            </Content>
        </Object>
        <Object Name="TeleportSpawnPoint" X="0" Y="0">
            <Content>
                <Comment Text="TeleportSpawn" X="0" Y="0" Size="32" Width="70" Height="70" Color="#0077DDFF" />
                <Spawn Name="TeleportSpawn" X="0" Y="8" Animation="StandAfterInhibition|56" />
                <ObjectReference Name="RunFromInhibition" X="-50" Y="-130" Filename="triggers.xml" />
                <ObjectReference Name="TeleportOut" X="0" Y="0" Filename="triggers.xml" />
            </Content>
        </Object>
        <Object Name="TeleportOut" X="0" Y="0">
            <Content>
                <Trigger Name="TeleportOut" X="0" Y="0" Width="120" Height="180">
                    <Content>
                        <Init>
                            <SetVariable Name="$Active" Type="Bool" Value="1" />
                            <SetVariable Name="$AI" Type="AI" Value="0" />
                            <SetVariable Name="$Node" Type="Node" Value="NTop|NChest|NPivot|NKnuckles_1|NKnuckles_2|NToe_1|NToe_2" />
                            <SetVariable Name="Condition" Value="0" />
                        </Init>
                        <Loop Name="EMPafterTeleport">
                            <Events>
                                <ValueChange Value="?getModel[Player].animationName" />
                            </Events>
                            <Conditions>
                                <Equal Value1="RunFromInhibition" Value2="?getModel[Player].animationName" />
                                <Equal Value1="?getCounter[PassiveEffects,EMPEquipped]" Value2="1" />
                                <Equal Value1="?getCounter[PassiveEffects,JustTeleported]" Value2="1" />
                            </Conditions>
                            <Actions>
                                <ActivateNearPlayer ActionID="TrapsOff" />
                                <Transform Name="ShiftToPLayer" />
                                <Wait Frames="1" />
                                <Transform Name="Explosion_Effect" />
                                <AppendValue Name="?getCounter[MissionProgress,EMPTeleport]" Value="1" />
                                <Activate ActionID="TeleportEMPMagnetSynergy" />
                            </Actions>
                        </Loop>
                        <Loop Name="CheckTeleportEMPMagnetSynergy">
                            <Events>
                                <Activate />
                            </Events>
                            <Conditions>
                                <Equal Value1="_$ActionID" Value2="TeleportEMPMagnetSynergy" />
                                <Greater Value1="?getCounter[PassiveEffects, Magnetizer]" Value2="0" />
                            </Conditions>
                            <Actions>
                                <SetVariable Name="?getCounter[Temp,TeleportEMPMagnet]" Value="1" />
                                <SetTimer Frames="90" />
                            </Actions>
                        </Loop>
                        <Loop Name="OffTeleportEMPMagnetSynergy">
                            <Events>
                                <Timeout />
                            </Events>
                            <Actions>
                                <SetVariable Name="?getCounter[Temp,TeleportEMPMagnet]" Value="0" />
                            </Actions>
                        </Loop>
                        <Loop Name="JustTeleportedClear">
                            <Events>
                                <ValueChange Value="?getModel[Player].animationName" />
                            </Events>
                            <Conditions>
                                <Equal Value1="RunFromInhibition" Value2="?getModel[Player].animationName" />
                                <Equal Value1="?getCounter[PassiveEffects,JustTeleported]" Value2="1" />
                            </Conditions>
                            <Actions>
                                <SetVariable Name="?getCounter[PassiveEffects,JustTeleported]" Value="0" />
                            </Actions>
                        </Loop>
                        <Loop Name="CheckEnterTeleport">
                            <Events>
                                <Enter />
                            </Events>
                            <Conditions>
                                <Equal Value1="?getCounter[PassiveEffects,JustTeleported]" Value2="1" />
                            </Conditions>
                            <Actions>
                                <AppendValue Name="Condition" Value="1" />
                                <Activate ActionID="TeleportParticles" />
                            </Actions>
                        </Loop>
                        <Loop Name="CheckShowTeleport">
                            <Events>
                                <OnShow />
                            </Events>
                            <Conditions>
                                <Equal Value1="?getCounter[PassiveEffects,JustTeleported]" Value2="1" />
                            </Conditions>
                            <Actions>
                                <AppendValue Name="Condition" Value="1" />
                                <Activate ActionID="TeleportParticles" />
                            </Actions>
                        </Loop>
                        <Loop Name="CheckActivateNearTeleport">
                            <Events>
                                <ActivateNearPlayer />
                            </Events>
                            <Conditions>
                                <Equal Value1="_$ActionID" Value2="Teleported" />
                            </Conditions>
                            <Actions>
                                <AppendValue Name="Condition" Value="1" />
                                <Activate ActionID="TeleportParticles" />
                            </Actions>
                        </Loop>
                        <Loop Name="ExecuteTeleportParticles">
                            <Events>
                                <Activate />
                            </Events>
                            <Conditions>
                                <Equal Value1="_$ActionID" Value2="TeleportParticles" />
                                <Equal Value1="?getCounter[PassiveEffects,JustTeleported]" Value2="1" />
                                <GreaterEqual Value1="_Condition" Value2="2" />
                            </Conditions>
                            <Actions>
                                <Wait Frames="20" />
                                <Sound Name="teleport_out" Volume="1" />
                                <Transform Name="Teleport_Effect" />
                                <SetVariable Name="Condition" Value="0" />
                            </Actions>
                        </Loop>
                    </Content>
                </Trigger>
                <Object Name="FTLparticles" X="0" Y="0">
                    <Content>
                        <Particle Name="FTL" X="0" Y="100" Layer="Particles" Factor="0">
                            <Properties>
                                <Static>
                                    <Enable Value="0" />
                                </Static>
                                <Dynamic>
                                    <Transformation Name="Teleport_Effect">
                                        <ActivationInterval Type="On" />
                                    </Transformation>
                                </Dynamic>
                            </Properties>
                        </Particle>
                    </Content>
                </Object>
                <Object Name="particles" X="0" Y="0">
                    <Content>
                        <Particle Name="EMP2" X="30" Y="0" Layer="Particles" Factor="0">
                            <Properties>
                                <Static>
                                    <Enable Value="0" />
                                </Static>
                                <Dynamic>
                                    <Transformation Name="Explosion_Effect">
                                        <ActivationInterval Type="On" />
                                    </Transformation>
                                </Dynamic>
                            </Properties>
                        </Particle>
                    </Content>
                    <Properties>
                        <Dynamic>
                            <Transformation Name="ShiftToPLayer">
                                <ToPlayerInterval Frames="1" />
                            </Transformation>
                        </Dynamic>
                    </Properties>
                </Object>
            </Content>
        </Object>
        <Object Name="DarknessTrigger" X="0" Y="0">
            <Content>
                <Placeholder Name="" X="0" Y="0">
                    <Properties>
                        <CounterActions>
                            <OnEnter>
                                <Assign Name="isDarkness" Namespace="Placeholder" Value="1" />
                                <Assign Name="Frames" Namespace="Placeholder" Value="~Frames" />
                                <Assign Name="Alpha" Namespace="Placeholder" Value="~Alpha" />
                                <Assign Name="Height" Namespace="Placeholder" Value="~Height" />
                                <Assign Name="TubeX" Namespace="Placeholder" Value="~TubeX" />
                                <Assign Name="TubeY" Namespace="Placeholder" Value="~TubeY" />
                                <Assign Name="TriggerX" Namespace="Placeholder" Value="~TriggerX" />
                                <Assign Name="TriggerY" Namespace="Placeholder" Value="~TriggerY" />
                                <Assign Name="SmallRing" Namespace="Placeholder" Value="~SmallRing" />
                                <Assign Name="isActiveForced" Namespace="Placeholder" Value="~isActiveForced" />
                            </OnEnter>
                            <OnExit>
                                <Clear Name="isDarkness" Namespace="Placeholder" />
                                <Clear Name="Frames" Namespace="Placeholder" />
                                <Clear Name="Alpha" Namespace="Placeholder" />
                                <Clear Name="Height" Namespace="Placeholder" />
                                <Clear Name="TubeX" Namespace="Placeholder" />
                                <Clear Name="TubeY" Namespace="Placeholder" />
                                <Clear Name="TriggerX" Namespace="Placeholder" />
                                <Clear Name="TriggerY" Namespace="Placeholder" />
                                <Clear Name="SmallRing" Namespace="Placeholder" />
                                <Clear Name="isActiveForced" Namespace="Placeholder" />
                            </OnExit>
                        </CounterActions>
                    </Properties>
                </Placeholder>
                <ObjectReference Name="DarknessSwitch" X="0" Y="0" Filename="phantoms.xml" Phantom="1" />
            </Content>
            <Properties>
                <Static>
                    <ContentVariable>
                        <Variable Name="Frames" Default="?RangeRandom[{?getBalance[Floor,Darkness,Frames,?getCounter[ST_Default,ST_Floor],Min] - ?getCounter[PassiveBonusExchangers,TimeDelta]}, {?getBalance[Floor,Darkness,Frames,?getCounter[ST_Default,ST_Floor],Max] - ?getCounter[PassiveBonusExchangers,TimeDelta]}]" />
                        <Variable Name="Alpha" Default="25" />
                        <Variable Name="Height" Default="360" />
                        <Variable Name="TubeX" Default="0" />
                        <Variable Name="TubeY" Default="-17" />
                        <Variable Name="TriggerX" Default="0" />
                        <Variable Name="TriggerY" Default="0" />
                        <Variable Name="SmallRing" Type="E_Bool" Default="0" AvailableTypes="E_Bool" />
                        <Variable Name="isActiveForced" Type="E_Bool" Default="1" AvailableTypes="E_Bool" />
                    </ContentVariable>
                </Static>
            </Properties>
        </Object>
        <Object Name="DarknessObject" X="0" Y="0">
            <Content>
                <Trigger Name="LightningActivator" X="1" Y="107" Width="147" Height="177">
                    <Content>
                        <Init>
                            <SetVariable Name="$AI" Type="AI" Value="0" />
                            <SetVariable Name="$Active" Type="Bool" Value="1" />
                            <SetVariable Name="$Node" Type="Node" Value="COM" />
                        </Init>
                        <Loop>
                            <Events>
                                <OnShow />
                            </Events>
                            <Actions>
                                <Activate ActionID="Lightning1" />
                            </Actions>
                        </Loop>
                    </Content>
                </Trigger>
                <Trigger Name="DarknessOn" X="~TriggerX" Y="~TriggerY" Width="100" Height="~Height">
                    <Content>
                        <Init>
                            <SetVariable Name="$Active" Type="Bool" Value="1" />
                            <SetVariable Name="$AI" Type="AI" Value="0" />
                            <SetVariable Name="$Node" Type="Node" Value="COM" />
                            <SetVariable Name="DarknessFrames" Value="~Frames" />
                            <SetVariable Name="Radius" Value="?getBalance[Floor,Darkness,Radius,?getCounter[ST_Floor]]" />
                            <SetVariable Name="StatisticsCounter" Value="None" />
                            <SetVariable Name="DarknessFinalAlpha" Value="~Alpha" />
                            <SetVariable Name="Stop" Value="0" />
                            <SetVariable Name="Ready" Value="1" />
                            <SetVariable Name="isActive" Value="~isActive" />
                        </Init>
                        <Loop Name="Enter">
                            <Events>
                                <Enter />
                            </Events>
                            <Conditions>
                                <Equal Value1="_isActive" Value2="1" />
                            </Conditions>
                            <Actions>
                                <Sound Name="darkness" Volume="2" />
                                <SetVariable Name="$Active" Value="0" />
                                <Transform Name="OpacityOn" />
                                <Wait Frames="4" />
                                <Transform Name="TubeOff" />
                                <SetVariable Name="Stop" Value="1" />
                                <Choose Order="Sync" Set="0">
                                    <Transform Name="OpacityOff" />
                                    <Activate ActionID="DarknessOn" />
                                </Choose>
                                <Activate ActionID="TrySwarmBlind" />
                            </Actions>
                        </Loop>
                        <Loop Name="TrySwarmBlind">
                            <Events>
                                <Activate />
                            </Events>
                            <Conditions>
                                <Equal Value1="_$ActionID" Value2="TrySwarmBlind" />
                                <Equal Value1="?getCounter[Temp,IsSwarmActive]" Value2="1" />
                                <GreaterEqual Value1="?getCounter[PassiveBonusExchangers,SwarmBlindnessByDarknessChance]" Value2="?RangeRandom[1,100]" />
                            </Conditions>
                            <Actions>
                                <ActivatePassiveEffect ActionID="SwarmBlindnessByDarkness" />
                                <ActivateNearPlayer ActionID="SwarmBlindness" />
                            </Actions>
                        </Loop>
                        <Loop Name="ActivateDarkness">
                            <Events>
                                <Activate />
                            </Events>
                            <Conditions>
                                <Equal Value1="_isActive" Value2="1" />
                                <Equal Value1="_$ActionID" Value2="DarknessOn" />
                                <Equal Value1="?getCounter[Debug,NoDark]" Value2="0" />
                            </Conditions>
                            <Actions>
                                <SetVariable Name="?getCounter[Temp, DarknessFrames]" Value="_DarknessFrames" />
                                <ActivatePassiveEffect ActionID="DarknessOn" />
                                <Activate ActionID="SetRadius" />
                                <SetVariable Name="?getCameraEffect[Darkness].enabled" Value="1" />
                                <AppendValue Name="?getCounter[Temp, PendingDarkness]" Value="_Ready" />
                                <SetTimer Frames="_DarknessFrames" />
                                <SetVariable Name="Ready" Value="0" />
                                <Activate ActionID="IncreaseOpacity" />
                            </Actions>
                        </Loop>
                        <Loop Name="SetRadius">
                            <Events>
                                <Activate />
                            </Events>
                            <Conditions>
                                <Equal Value1="_isActive" Value2="1" />
                                <Equal Value1="_$ActionID" Value2="SetRadius" />
                                <Equal Value1="?getCounter[Temp, PendingDarknessSofter]" Value2="0" />
                            </Conditions>
                            <Actions>
                                <SetVariable Name="?getCameraEffect[Darkness].radius" Value="_Radius" />
                            </Actions>
                        </Loop>
                        <Loop Name="SetRadius">
                            <Events>
                                <Activate />
                            </Events>
                            <Conditions>
                                <Equal Value1="_isActive" Value2="1" />
                                <Equal Value1="_$ActionID" Value2="SetRadius" />
                                <GreaterEqual Value1="?getCounter[Temp, PendingDarknessSofter]" Value2="1" />
                            </Conditions>
                            <Actions>
                                <SetVariable Name="?getCameraEffect[Darkness].radius" Value="?getCounter[Temp,SofterDarknessRadius]" />
                            </Actions>
                        </Loop>
                        <Loop Name="Blackout">
                            <Events>
                                <Activate />
                            </Events>
                            <Conditions>
                                <Equal Value1="_$ActionID" Value2="IncreaseOpacity" />
                                <Greater Value1="?getCameraEffect[Darkness].alpha" Value2="_DarknessFinalAlpha" />
                            </Conditions>
                            <Actions>
                                <AppendValue Name="?getCameraEffect[Darkness].alpha" Value="-6.25" />
                                <Wait Frames="1" />
                                <Activate ActionID="IncreaseOpacity" />
                            </Actions>
                        </Loop>
                        <Loop Name="ReversedBlackout">
                            <Events>
                                <Activate />
                            </Events>
                            <Conditions>
                                <Equal Value1="_$ActionID" Value2="DecreaseOpacity" />
                                <Less Value1="?getCameraEffect[Darkness].alpha" Value2="100" />
                                <Equal Value1="?getCounter[Temp, PendingDarkness]" Value2="0" />
                                <Equal Value1="_Ready" Value2="1" />
                            </Conditions>
                            <Actions>
                                <AppendValue Name="?getCameraEffect[Darkness].alpha" Value="6.25" />
                                <Wait Frames="1" />
                                <Activate ActionID="DecreaseOpacity" />
                            </Actions>
                        </Loop>
                        <Loop Name="Timeout">
                            <Events>
                                <Timeout />
                            </Events>
                            <Conditions>
                                <Greater Value1="?getCounter[Temp, PendingDarkness]" Value2="0" />
                            </Conditions>
                            <Actions>
                                <AppendValue Name="?getCounter[Temp, PendingDarkness]" Value="-1" />
                                <SetVariable Name="Ready" Value="1" />
                                <Activate ActionID="KillDarkness" />
                            </Actions>
                        </Loop>
                        <Loop Name="StartKillingDarkness">
                            <Events>
                                <Activate />
                            </Events>
                            <Conditions>
                                <Equal Value1="_$ActionID" Value2="KillDarkness" />
                                <Equal Value1="?getCounter[Temp, PendingDarkness]" Value2="0" />
                                <Equal Value1="_Ready" Value2="1" />
                            </Conditions>
                            <Actions>
                                <Activate ActionID="DecreaseOpacity" />
                                <Wait Frames="17" />
                                <Activate ActionID="DarknessOff" />
                            </Actions>
                        </Loop>
                        <Loop Name="DarknessOff">
                            <Events>
                                <Activate />
                            </Events>
                            <Conditions>
                                <Equal Value1="_$ActionID" Value2="DarknessOff" />
                                <Equal Value1="?getCounter[Temp, PendingDarkness]" Value2="0" />
                                <Equal Value1="_Ready" Value2="1" />
                            </Conditions>
                            <Actions>
                                <ActivatePassiveEffect ActionID="DarknessOff" />
                                <SetVariable Name="?getCameraEffect[Darkness].enabled" Value="0" />
                                <SetVariable Name="?getCounter[Temp,SwarmBlind]" Value="0" />
                                <Swarm Type="Activate" SwarmName="Test" ActionID="DarknessOff" />
                            </Actions>
                        </Loop>
                        <Loop Name="DarknessOffEndGame">
                            <Events>
                                <EndGame />
                            </Events>
                            <Actions>
                                <ActivatePassiveEffect ActionID="DarknessOff" />
                                <SetVariable Name="?getCameraEffect[Darkness].enabled" Value="0" />
                            </Actions>
                        </Loop>
                        <Loop>
                            <Events>
                                <Activate />
                            </Events>
                            <Actions>
                                <Choose Order="Sync" Set="0">
                                    <Transform Name="Lightning1" />
                                    <Transform Name="Lightning2" />
                                </Choose>
                                <Wait Frames="3" />
                                <Activate ActionID="Lightning2" />
                            </Actions>
                            <Conditions>
                                <Equal Value1="_isActive" Value2="1" />
                                <Equal Value1="_$ActionID" Value2="Lightning1" />
                                <Equal Value1="_Stop" Value2="0" />
                            </Conditions>
                        </Loop>
                        <Loop>
                            <Events>
                                <Activate />
                            </Events>
                            <Actions>
                                <Choose Order="Sync" Set="0">
                                    <Transform Name="Lightning2" />
                                    <Transform Name="Lightning3" />
                                </Choose>
                                <Wait Frames="3" />
                                <Activate ActionID="Lightning3" />
                            </Actions>
                            <Conditions>
                                <Equal Value1="_$ActionID" Value2="Lightning2" />
                                <Equal Value1="_Stop" Value2="0" />
                            </Conditions>
                        </Loop>
                        <Loop>
                            <Events>
                                <Activate />
                            </Events>
                            <Actions>
                                <Choose Order="Sync" Set="0">
                                    <Transform Name="Lightning3" />
                                    <Transform Name="Lightning4" />
                                </Choose>
                                <Wait Frames="3" />
                                <Activate ActionID="Lightning4" />
                            </Actions>
                            <Conditions>
                                <Equal Value1="_isActive" Value2="1" />
                                <Equal Value1="_$ActionID" Value2="Lightning3" />
                                <Equal Value1="_Stop" Value2="0" />
                            </Conditions>
                        </Loop>
                        <Loop>
                            <Events>
                                <Activate />
                            </Events>
                            <Actions>
                                <Choose Order="Sync" Set="0">
                                    <Transform Name="Lightning4" />
                                    <Transform Name="Lightning1" />
                                </Choose>
                                <Wait Frames="3" />
                                <Activate ActionID="Lightning1" />
                            </Actions>
                            <Conditions>
                                <Equal Value1="_isActive" Value2="1" />
                                <Equal Value1="_$ActionID" Value2="Lightning4" />
                                <Equal Value1="_Stop" Value2="0" />
                            </Conditions>
                        </Loop>
                        <Loop>
                            <Events>
                                <Activate />
                            </Events>
                            <Actions>
                                <Transform Name="LightningOff" />
                            </Actions>
                            <Conditions>
                                <Equal Value1="_isActive" Value2="1" />
                                <Operator Type="Or">
                                    <Equal Value1="_$ActionID" Value2="Lightning1" />
                                    <Equal Value1="_$ActionID" Value2="Lightning2" />
                                    <Equal Value1="_$ActionID" Value2="Lightning3" />
                                    <Equal Value1="_$ActionID" Value2="Lightning4" />
                                </Operator>
                                <Equal Value1="_Stop" Value2="1" />
                            </Conditions>
                        </Loop>
                        <Loop ToolTip="SwitchOff_OnDeath">
                            <Events>
                                <OnDeath />
                            </Events>
                            <Conditions>
                                <Greater Value1="?getCounter[Temp, PendingDarkness]" Value2="0" />
                            </Conditions>
                            <Actions>
                                <SetVariable Name="?getCounter[Temp, PendingDarkness]" Value="0" />
                                <SetVariable Name="Ready" Value="1" />
                                <Activate ActionID="KillDarkness" />
                            </Actions>
                        </Loop>
                    </Content>
                </Trigger>
                <Object Name="tube" X="~TubeX" Y="~TubeY">
                    <Content>
                        <Image ClassName="zone2.v_white" X="1" Y="42" Layer="CPanelsAdd" Width="150" Height="83" Factor="0">
                            <Properties>
                                <Static>
                                    <Matrix A="150" B="0" C="0" D="83" Tx="0" Ty="0" />
                                    <StartColor Color="#71564AFF" />
                                    <Enable Value="~SmallRing" />
                                </Static>
                            </Properties>
                        </Image>
                        <Image ClassName="zone2.v_white" X="16" Y="51" Layer="CPanelsAdd" Width="121" Height="71" Factor="0">
                            <Properties>
                                <Static>
                                    <Matrix A="121" B="0" C="0" D="71" Tx="0" Ty="0" />
                                    <StartColor Color="#7B6052FF" />
                                    <Enable Value="~SmallRing" />
                                </Static>
                            </Properties>
                        </Image>
                        <Image ClassName="zone2.darkness_switch" X="0" Y="90" Layer="CPanelsAdd" Width="76" Height="288" Factor="0">
                            <Properties>
                                <Static>
                                    <Matrix A="76" B="0" C="0" D="288" Tx="0" Ty="0" />
                                </Static>
                            </Properties>
                        </Image>
                        <Image ClassName="zone2.darkness_switch" X="76" Y="90" Layer="CPanelsAdd" Width="76" Height="288" Factor="0">
                            <Properties>
                                <Static>
                                    <Matrix A="-76" B="0" C="0" D="288" Tx="76" Ty="0" />
                                </Static>
                            </Properties>
                        </Image>
                        <Object Name="tube_lit" X="38" Y="111">
                            <Content>
                                <Image ClassName="zone2.darkness_switch2" X="0" Y="0" Layer="CPanelsAdd" Width="38" Height="232" Factor="0">
                                    <Properties>
                                        <Static>
                                            <Matrix A="38" B="0" C="0" D="232" Tx="0" Ty="0" />
                                        </Static>
                                    </Properties>
                                </Image>
                                <Image ClassName="zone2.darkness_switch2" X="38" Y="0" Layer="CPanelsAdd" Width="38" Height="232" Factor="0">
                                    <Properties>
                                        <Static>
                                            <Matrix A="-38" B="0" C="0" D="232" Tx="38" Ty="0" />
                                        </Static>
                                    </Properties>
                                </Image>
                            </Content>
                            <Properties>
                                <Static>
                                    <StartColor Color="#FFFFFF90" />
                                    <Enable Value="~isActive" />
                                </Static>
                                <Dynamic>
                                    <Transformation Name="TubeOff">
                                        <ActivationInterval Type="Off" />
                                    </Transformation>
                                </Dynamic>
                            </Properties>
                        </Object>
                        <Image ClassName="zone2.darkness_switch8" X="21" Y="159" Layer="CPanelsAdd" Width="8" Height="58" Factor="0">
                            <Properties>
                                <Static>
                                    <Matrix A="0" B="58" C="-8" D="0" Tx="8" Ty="0" />
                                </Static>
                            </Properties>
                        </Image>
                        <Image ClassName="zone2.darkness_switch5" X="6" Y="~Switch5Y" Layer="CPanelsAdd" Width="70" Height="18" Factor="0">
                            <Properties>
                                <Static>
                                    <Matrix A="70" B="0" C="0" D="18" Tx="0" Ty="0" />
                                </Static>
                            </Properties>
                        </Image>
                        <Image ClassName="zone2.darkness_switch5" X="76" Y="~Switch5Y" Layer="CPanelsAdd" Width="70" Height="18" Factor="0">
                            <Properties>
                                <Static>
                                    <Matrix A="-70" B="0" C="0" D="18" Tx="70" Ty="0" />
                                </Static>
                            </Properties>
                        </Image>
                        <Image ClassName="zone2.darkness_switch4" X="6" Y="~Switch4Y" Layer="CPanelsAdd" Width="14" Height="~Switch4Height" Factor="0">
                            <Properties>
                                <Static>
                                    <Matrix A="14" B="0" C="0" D="~Switch4Height" Tx="0" Ty="0" />
                                </Static>
                            </Properties>
                        </Image>
                        <Image ClassName="zone2.darkness_switch4" X="132" Y="~Switch4Y" Layer="CPanelsAdd" Width="14" Height="~Switch4Height" Factor="0">
                            <Properties>
                                <Static>
                                    <Matrix A="-14" B="0" C="0" D="~Switch4Height" Tx="14" Ty="0" />
                                </Static>
                            </Properties>
                        </Image>
                        <Image ClassName="zone2.darkness_switch3" X="55" Y="133" Layer="CPanelsAdd" Width="22" Height="165" Factor="0">
                            <Properties>
                                <Static>
                                    <Matrix A="22" B="0" C="0" D="165" Tx="0" Ty="0" />
                                    <StartColor Color="#FFFFFF99" />
                                </Static>
                            </Properties>
                        </Image>
                        <Object Name="halo" X="-49" Y="-73">
                            <Content>
                                <Image ClassName="zone2.darkness_switch10" X="49" Y="163" Layer="CPanelsAdd" Width="76" Height="288" Factor="0">
                                    <Properties>
                                        <Static>
                                            <Matrix A="76" B="0" C="0" D="288" Tx="0" Ty="0" />
                                        </Static>
                                    </Properties>
                                </Image>
                                <Image ClassName="zone2.darkness_switch10" X="125" Y="163" Layer="CPanelsAdd" Width="76" Height="288" Factor="0">
                                    <Properties>
                                        <Static>
                                            <Matrix A="-76" B="0" C="0" D="288" Tx="76" Ty="0" />
                                        </Static>
                                    </Properties>
                                </Image>
                                <Image ClassName="zone2.darkness_switch9" X="0" Y="263" Layer="CPanelsAdd" Width="125" Height="263" Factor="0">
                                    <Properties>
                                        <Static>
                                            <Matrix A="0" B="-263" C="125" D="0" Tx="0" Ty="263" />
                                        </Static>
                                    </Properties>
                                </Image>
                                <Image ClassName="zone2.darkness_switch9" X="125" Y="263" Layer="CPanelsAdd" Width="125" Height="263" Factor="0">
                                    <Properties>
                                        <Static>
                                            <Matrix A="0" B="-263" C="-125" D="0" Tx="125" Ty="263" />
                                        </Static>
                                    </Properties>
                                </Image>
                                <Image ClassName="zone2.darkness_switch9" X="0" Y="0" Layer="CPanelsAdd" Width="125" Height="263" Factor="0">
                                    <Properties>
                                        <Static>
                                            <Matrix A="0" B="263" C="125" D="0" Tx="0" Ty="0" />
                                        </Static>
                                    </Properties>
                                </Image>
                                <Image ClassName="zone2.darkness_switch9" X="125" Y="0" Layer="CPanelsAdd" Width="125" Height="263" Factor="0">
                                    <Properties>
                                        <Static>
                                            <Matrix A="0" B="263" C="-125" D="0" Tx="125" Ty="0" />
                                        </Static>
                                    </Properties>
                                </Image>
                            </Content>
                            <Properties>
                                <Static>
                                    <StartColor Color="#FFFFFF00" />
                                </Static>
                                <Dynamic>
                                    <Transformation Name="OpacityOn">
                                        <ColorInterval ColorFinish="#FFFFFFFF" Frames="3" />
                                    </Transformation>
                                    <Transformation Name="OpacityOff">
                                        <ColorInterval ColorFinish="#FFFFFF00" Frames="3" />
                                    </Transformation>
                                </Dynamic>
                            </Properties>
                        </Object>
                        <Object Name="lightning" X="66" Y="133">
                            <Content>
                                <Image ClassName="zone2.darkness_switch6" X="1" Y="0" Layer="CPanelsAdd" Width="21" Height="165" Factor="0">
                                    <Properties>
                                        <Static>
                                            <Matrix A="21" B="0" C="0" D="165" Tx="0" Ty="0" />
                                            <Enable Value="1" />
                                        </Static>
                                        <Dynamic>
                                            <Transformation Name="Lightning1">
                                                <ActivationInterval Type="Switch" />
                                            </Transformation>
                                        </Dynamic>
                                    </Properties>
                                </Image>
                                <Image ClassName="zone2.darkness_switch7" X="0" Y="0" Layer="CPanelsAdd" Width="22" Height="165" Factor="0">
                                    <Properties>
                                        <Static>
                                            <Matrix A="22" B="0" C="0" D="165" Tx="0" Ty="0" />
                                            <Enable Value="0" />
                                        </Static>
                                        <Dynamic>
                                            <Transformation Name="Lightning2">
                                                <ActivationInterval Type="Switch" />
                                            </Transformation>
                                        </Dynamic>
                                    </Properties>
                                </Image>
                                <Image ClassName="zone2.darkness_switch6" X="1" Y="0" Layer="CPanelsAdd" Width="21" Height="165" Factor="0">
                                    <Properties>
                                        <Static>
                                            <Matrix A="21" B="0" C="0" D="-165" Tx="0" Ty="165" />
                                            <Enable Value="0" />
                                        </Static>
                                        <Dynamic>
                                            <Transformation Name="Lightning3">
                                                <ActivationInterval Type="Switch" />
                                            </Transformation>
                                        </Dynamic>
                                    </Properties>
                                </Image>
                                <Image ClassName="zone2.darkness_switch7" X="0" Y="0" Layer="CPanelsAdd" Width="22" Height="165" Factor="0">
                                    <Properties>
                                        <Static>
                                            <Matrix A="22" B="0" C="0" D="-165" Tx="0" Ty="165" />
                                            <Enable Value="0" />
                                        </Static>
                                        <Dynamic>
                                            <Transformation Name="Lightning4">
                                                <ActivationInterval Type="Switch" />
                                            </Transformation>
                                        </Dynamic>
                                    </Properties>
                                </Image>
                            </Content>
                            <Properties>
                                <Static>
                                    <Enable Value="~isActive" />
                                </Static>
                                <Dynamic>
                                    <Transformation Name="LightningOff">
                                        <ActivationInterval Type="Off" />
                                    </Transformation>
                                </Dynamic>
                            </Properties>
                        </Object>
                    </Content>
                </Object>
                <Object Name="Phantom" X="~TriggerX" Y="0" Phantom="1">
                    <Content>
                        <Comment Text="DarknessOn" X="0" Y="0" Size="32" Width="100" Height="~Height" Color="#FF557FFF" />
                    </Content>
                </Object>
            </Content>
            <Properties>
                <Static>
                    <ContentVariable>
                        <Variable Name="Frames" Default="?ListRandom[600,900]" />
                        <Variable Name="Alpha" Default="20" />
                        <Variable Name="Height" Default="360" />
                        <Variable Name="TubeX" Default="0" />
                        <Variable Name="TubeY" Default="-17" />
                        <Variable Name="TriggerX" Default="0" />
                        <Variable Name="TriggerY" Default="0" />
                        <Variable Name="SmallRing" Type="E_Bool" Default="0" AvailableTypes="E_Bool" />
                        <Variable Name="isActive" Default="0" />
                        <Expression Name="Switch5Y" Value="?switch[~SmallRing, 0:0, 45]" />
                        <Expression Name="Switch4Y" Value="?switch[~SmallRing, 0:18, 63]" />
                        <Expression Name="Switch4Height" Value="?switch[~SmallRing, 0:72, 27]" />
                    </ContentVariable>
                </Static>
            </Properties>
        </Object>
        <Object Name="SwarmActivator" X="0" Y="0">
            <Content>
                <Trigger Name="SwarmActivator" X="0" Y="0" Width="~Width" Height="~Height">
                    <Content>
                        <Init>
                            <SetVariable Name="$AI" Type="AI" Value="0" />
                            <SetVariable Name="$Active" Type="Bool" Value="1" />
                            <SetVariable Name="$Node" Type="Node" Value="COM" />
                            <SetVariable Name="Entered" Value="0" />
                        </Init>
                        <Loop>
                            <Events>
                                <Enter />
                            </Events>
                            <Actions>
                                <SetVariable Name="Entered" Value="1" />
                                <Swarm Type="Spawn" SwarmName="Test" Waypoint="~SpawnPoint" />
                                <Swarm Type="Activate" SwarmName="Test" ActionID="SpawnTrigger" />
                                <Swarm Type="Activate" SwarmName="Test" ActionID="LaunchFromSwarmHole" />
                                <Wait Frames="20" />
                                <Swarm Type="Activate" SwarmName="Test" ActionID="StartShuffle" />
                                <Swarm Type="Activate" SwarmName="Test" ActionID="StartVibration" />
                                <Swarm Type="Activate" SwarmName="Test" ActionID="Rotate" />
                                <SetVariable Name="?getCounter[Temp,IsSwarmActive]" Value="1" />
                            </Actions>
                            <Conditions>
                                <Equal Value1="?getCounter[ST_ProgressMarkers,SwarmForbidden]" Value2="0" />
                                <Equal Value1="?getCounter[Temp,IsSwarmActive]" Value2="0" />
                                <Equal Value1="_Entered" Value2="0" />
                            </Conditions>
                        </Loop>
                    </Content>
                </Trigger>
            </Content>
            <Properties>
                <Static>
                    <ContentVariable>
                        <Variable Name="Height" Default="360" />
                        <Variable Name="Width" Default="100" />
                        <Variable Name="SpawnPoint" Default="Start" />
                    </ContentVariable>
                </Static>
            </Properties>
        </Object>
        <Object Name="EMPActivator" X="0" Y="0">
            <Content>
                <Object Name="Wrapper" X="~deltaX" Y="~deltaY">
                    <Content>
                        <Trigger Name="EMPActivator" X="-70" Y="~Y" Width="140" Height="~height">
                            <Content>
                                <Init>
                                    <SetVariable Name="$AI" Type="AI" Value="0" />
                                    <SetVariable Name="$Active" Type="Bool" Value="1" />
                                    <SetVariable Name="$Node" Type="Node" Value="COM" />
                                    <SetVariable Name="Animate" Type="Bool" Value="0" />
                                </Init>
                                <Loop Name="HaltJump">
                                    <Events>
                                        <Enter />
                                    </Events>
                                    <Conditions>
                                        <Equal Value1="?getCounter[PassiveEffects,CooldownEMP]" Value2="0" />
                                    </Conditions>
                                    <Actions>
                                        <BlockAnimationKey Key="Up" Value="1" Model="Player" />
                                    </Actions>
                                </Loop>
                                <Loop Name="ExecuteEMP">
                                    <Events>
                                        <KeyPressed />
                                    </Events>
                                    <Conditions>
                                        <Equal Value1="?getCounter[PassiveEffects,CooldownEMP]" Value2="0" />
                                        <Equal Value1="_$Key" Value2="Up" />
                                    </Conditions>
                                    <Actions>
                                        <ActivatePassiveEffect ActionID="zapped" />
                                        <SetVariable Name="?getCounter[ST_ProgressMarkers,ShowActivesTutorial]" Value="0" />
                                        <Sound Name="emp" Volume="1" />
                                        <Transform Name="ShiftToPLayer" />
                                        <Wait Frames="1" />
                                        <Transform Name="Explosion_Effect" />
                                        <Activate ActionID="ReleaseJump" />
                                        <ActivateNearPlayer ActionID="TrapsOff" />
                                        <Transform Name="BannerFadeOut" />
                                        <AppendValue Name="?getCounter[MissionProgress, EMP]" Value="1" />
                                        <Activate ActionID="CheckEMPMagnetSynergy" />
                                    </Actions>
                                </Loop>
                                <Loop Name="OnExitReleaseJump">
                                    <Events>
                                        <Exit />
                                    </Events>
                                    <Actions>
                                        <Activate ActionID="ReleaseJump" />
                                    </Actions>
                                </Loop>
                                <Loop Name="ReleaseJump">
                                    <Events>
                                        <Activate />
                                    </Events>
                                    <Conditions>
                                        <Equal Value1="_$ActionID" Value2="ReleaseJump" />
                                    </Conditions>
                                    <Actions>
                                        <BlockAnimationKey Key="Up" Value="0" Model="Player" />
                                    </Actions>
                                </Loop>
                                <Loop>
                                    <Events>
                                        <OnShow />
                                    </Events>
                                    <Actions>
                                        <SetVariable Name="Animate" Value="1" />
                                        <Activate ActionID="Animate" />
                                    </Actions>
                                </Loop>
                                <Loop>
                                    <Events>
                                        <Activate />
                                    </Events>
                                    <Conditions>
                                        <Equal Value1="_$ActionID" Value2="Animate" />
                                        <Equal Value1="_Animate" Value2="1" />
                                    </Conditions>
                                    <Actions>
                                        <Transform Name="blink" />
                                        <Activate ActionID="Animate" />
                                    </Actions>
                                </Loop>
                                <Loop>
                                    <Events>
                                        <OnHide />
                                    </Events>
                                    <Actions>
                                        <SetVariable Name="Animate" Value="0" />
                                    </Actions>
                                </Loop>
                                <Loop Name="EnableEMPMagnetSynergy">
                                    <Events>
                                        <Activate />
                                    </Events>
                                    <Conditions>
                                        <Equal Value1="_$ActionID" Value2="CheckEMPMagnetSynergy" />
                                        <Greater Value1="?getCounter[PassiveEffects, Magnetizer]" Value2="0" />
                                    </Conditions>
                                    <Actions>
                                        <SetVariable Name="?getCounter[Temp,EMPMagnet]" Value="1" />
                                        <SetTimer Frames="90" />
                                    </Actions>
                                </Loop>
                                <Loop Name="OffEMPMagnetSynergy">
                                    <Events>
                                        <Timeout />
                                    </Events>
                                    <Actions>
                                        <SetVariable Name="?getCounter[Temp,EMPMagnet]" Value="0" />
                                    </Actions>
                                </Loop>
                            </Content>
                        </Trigger>
                        <Object Name="Banner" X="0" Y="0">
                            <Content>
                                <Image ClassName="actives.activator1" X="-68" Y="~Y" Layer="UnderFloorPanels" Width="136" Height="~height" Factor="0">
                                    <Properties>
                                        <Static>
                                            <Matrix A="136" B="0" C="0" D="~height" Tx="0" Ty="0" />
                                        </Static>
                                    </Properties>
                                </Image>
                                <Image ClassName="actives.activator2" X="-68" Y="~YHeader" Layer="UnderFloorPanels" Width="136" Height="126" Factor="0">
                                    <Properties>
                                        <Static>
                                            <Enable Value="~head" />
                                            <Matrix A="-136" B="0" C="0" D="126" Tx="136" Ty="0" />
                                        </Static>
                                    </Properties>
                                </Image>
                            </Content>
                            <Properties>
                                <Dynamic>
                                    <Transformation Name="BannerFadeOut">
                                        <ColorInterval ColorFinish="#FFFFFF00" Frames="20" ColorStart="#FFFFFFFF" />
                                    </Transformation>
                                </Dynamic>
                            </Properties>
                        </Object>
                        <Image ClassName="actives.activator3" X="-20" Y="~arrow_y" Layer="UnderFloorPanels" Width="40" Height="23" Factor="0">
                            <Properties>
                                <Static>
                                    <Matrix A="40" B="0" C="0" D="23" Tx="0" Ty="0" />
                                </Static>
                                <Dynamic>
                                    <Transformation Name="blink">
                                        <MoveInterval Frames="40" Type="Bezier">
                                            <Point X="0" Y="0" />
                                            <Point X="0" Y="-30" />
                                            <Point X="0" Y="-30" />
                                        </MoveInterval>
                                        <MoveInterval Frames="40" Type="Bezier">
                                            <Point X="0" Y="0" />
                                            <Point X="0" Y="30" />
                                            <Point X="0" Y="30" />
                                        </MoveInterval>
                                    </Transformation>
                                    <Transformation Name="BannerFadeOut">
                                        <ColorInterval ColorFinish="#FFFFFF00" Frames="20" ColorStart="#FFFFFFFF" />
                                    </Transformation>
                                </Dynamic>
                            </Properties>
                        </Image>
                        <Image ClassName="actives.emp" X="-50" Y="~icon_y" Layer="UnderFloorPanels" Width="101" Height="121" Factor="0">
                            <Properties>
                                <Static>
                                    <StartColor Color="#FAE2C6FF" />
                                    <Matrix A="101" B="0" C="0" D="121" Tx="0" Ty="0" />
                                </Static>
                                <Dynamic>
                                    <Transformation Name="BannerFadeOut">
                                        <ColorInterval ColorFinish="#FFFFFF00" Frames="20" ColorStart="#FFFFFFFF" />
                                    </Transformation>
                                </Dynamic>
                            </Properties>
                        </Image>
                        <Object Name="particles" X="0" Y="0">
                            <Content>
                                <Particle Name="EMP2" X="30" Y="0" Layer="Particles" Factor="0">
                                    <Properties>
                                        <Static>
                                            <Enable Value="0" />
                                        </Static>
                                        <Dynamic>
                                            <Transformation Name="Explosion_Effect">
                                                <ActivationInterval Type="On" />
                                            </Transformation>
                                        </Dynamic>
                                    </Properties>
                                </Particle>
                            </Content>
                            <Properties>
                                <Dynamic>
                                    <Transformation Name="ShiftToPLayer">
                                        <ToPlayerInterval Frames="1" />
                                    </Transformation>
                                </Dynamic>
                            </Properties>
                        </Object>
                        <Object Name="Tutor" X="0" Y="0">
                            <Content>
                                <Trigger Name="TutorDeactivator" X="-70" Y="0" Width="150" Height="150">
                                    <Content>
                                        <Init>
                                            <SetVariable Name="$AI" Type="AI" Value="0" />
                                            <SetVariable Name="$Active" Type="Bool" Value="1" />
                                            <SetVariable Name="$Node" Type="Node" Value="COM" />
                                        </Init>
                                        <Loop Name="TurnOff">
                                            <Events>
                                                <OnShow />
                                            </Events>
                                            <Conditions>
                                                <Equal Value1="?getCounter[ST_ProgressMarkers,ShowActivesTutorial]" Value2="0" />
                                            </Conditions>
                                            <Actions>
                                                <Control Model="Player" Switch="On" />
                                                <Transform Name="tutorOff" />
                                            </Actions>
                                        </Loop>
                                    </Content>
                                </Trigger>
                                <ObjectReference Name="TutorialTrigger" X="-70" Y="~Y" Filename="triggers.xml">
                                    <Properties>
                                        <Static>
                                            <OverrideVariable>
                                                <Variable Name="TextKeyboard" Value="^Tutorial.Activator.Text^" />
                                                <Variable Name="Key" Value="Up" />
                                                <Variable Name="Width" Value="100" />
                                                <Variable Name="Height" Value="~height" />
                                                <Variable Name="TextMobile" Value="^Tutorial.Activator.Text^" />
                                            </OverrideVariable>
                                        </Static>
                                    </Properties>
                                </ObjectReference>
                            </Content>
                            <Properties>
                                <Static>
                                    <Enable Value="~enableTutor" />
                                </Static>
                                <Dynamic>
                                    <Transformation Name="tutorOff">
                                        <ActivationInterval Type="Off" />
                                    </Transformation>
                                </Dynamic>
                            </Properties>
                        </Object>
                    </Content>
                </Object>
            </Content>
            <Properties>
                <Static>
                    <ContentVariable>
                        <Variable Name="additional_Y_EMP" Type="E_Int" Default="0" AvailableTypes="E_Int" />
                        <Variable Name="deltaX" Type="E_Int" Default="0" AvailableTypes="E_Int" />
                        <Variable Name="deltaY" Type="E_Int" Default="0" AvailableTypes="E_Int" />
                        <Variable Name="height" Type="E_Int" Default="360" AvailableTypes="E_Int" />
                        <Variable Name="head" Type="E_Bool" Default="0" AvailableTypes="E_Bool" />
                        <Expression Name="Y" Value="{200-~height}" />
                        <Expression Name="YHeader" Value="{~Y-126}" />
                        <Expression Name="enableTutor" Value="?getCounter[ST_ProgressMarkers,ShowActivesTutorial]" />
                        <Expression Name="arrow_y_for_nondefaultheight" Value="{-~height/2+175+~additional_Y_EMP}" />
                        <Expression Name="arrow_y" Value="?switch[~height, 360:-18, ~arrow_y_for_nondefaultheight]" />
                        <Expression Name="icon_y_for_nondefaultheight" Value="{-~height/2+198+~additional_Y_EMP}" />
                        <Expression Name="icon_y" Value="?switch[~height, 360:11, ~icon_y_for_nondefaultheight]" />
                    </ContentVariable>
                </Static>
            </Properties>
        </Object>
        <Object Name="TeleportActivator" X="0" Y="0">
            <Content>
                <Object Name="Wrapper" X="~deltaX" Y="~deltaY">
                    <Content>
                        <Trigger Name="TeleportActivator" X="-70" Y="~Y" Width="140" Height="~height">
                            <Content>
                                <Init>
                                    <SetVariable Name="$AI" Type="AI" Value="0" />
                                    <SetVariable Name="$Active" Type="Bool" Value="1" />
                                    <SetVariable Name="$Node" Type="Node" Value="COM" />
                                    <SetVariable Name="Animate" Type="Bool" Value="0" />
                                </Init>
                                <Loop Name="HaltJump">
                                    <Events>
                                        <Enter />
                                    </Events>
                                    <Conditions>
                                        <Equal Value1="?getCounter[PassiveEffects,CooldownTeleport]" Value2="0" />
                                    </Conditions>
                                    <Actions>
                                        <BlockAnimationKey Key="Up" Value="1" Model="Player" />
                                    </Actions>
                                </Loop>
                                <Loop Name="OnExitReleaseJump">
                                    <Events>
                                        <Exit />
                                    </Events>
                                    <Actions>
                                        <Activate ActionID="ReleaseJump" />
                                    </Actions>
                                </Loop>
                                <Loop Name="ReleaseJump">
                                    <Events>
                                        <Activate />
                                    </Events>
                                    <Conditions>
                                        <Equal Value1="_$ActionID" Value2="ReleaseJump" />
                                    </Conditions>
                                    <Actions>
                                        <BlockAnimationKey Key="Up" Value="0" Model="Player" />
                                    </Actions>
                                </Loop>
                                <Loop Name="KeyPressed_ExecuteTeleport">
                                    <Events>
                                        <KeyPressed />
                                    </Events>
                                    <Conditions>
                                        <Equal Value1="?getCounter[PassiveEffects,CooldownTeleport]" Value2="0" />
                                        <Equal Value1="_$Key" Value2="Up" />
                                    </Conditions>
                                    <Actions>
                                        <Activate ActionID="ExecuteTeleport" />
                                    </Actions>
                                </Loop>
                                <Loop Name="ExecuteTeleport">
                                    <Events>
                                        <Activate />
                                    </Events>
                                    <Conditions>
                                        <Equal Value1="_$ActionID" Value2="ExecuteTeleport" />
                                    </Conditions>
                                    <Actions>
                                        <ActivatePassiveEffect ActionID="Teleported" />
                                        <ActivateNearPlayer ActionID="Teleported" />
                                        <SetVariable Name="?getCounter[PassiveEffects,JustTeleported]" Value="1" />
                                        <SetVariable Name="?getCounter[ST_ProgressMarkers,ShowActivesTutorial]" Value="0" />
                                        <Sound Name="teleport_in" Volume="1" />
                                        <Transform Name="Teleport_Effect" />
                                        <Spawn Model="Player" Animation="" Frames="0" UseSaveme="1" UseTeleport="1" PlayAnimation="1" />
                                        <Transform Name="BannerFadeOut" />
                                        <Control Model="Player" Switch="Off" />
                                        <Wait Frames="120" />
                                        <Control Model="Player" Switch="On" />
                                        <Press Key="Right" Model="Player" />
                                        <Activate ActionID="ReleaseJump" />
                                        <AppendValue Name="?getCounter[MissionProgress, Teleport]" Value="1" />
                                    </Actions>
                                </Loop>
                                <Loop Name="AnimateOnShow">
                                    <Events>
                                        <OnShow />
                                    </Events>
                                    <Actions>
                                        <SetVariable Name="Animate" Value="1" />
                                        <Activate ActionID="Animate" />
                                    </Actions>
                                </Loop>
                                <Loop Name="Animate">
                                    <Events>
                                        <Activate />
                                    </Events>
                                    <Conditions>
                                        <Equal Value1="_$ActionID" Value2="Animate" />
                                        <Equal Value1="_Animate" Value2="1" />
                                    </Conditions>
                                    <Actions>
                                        <Transform Name="blink" />
                                        <Activate ActionID="Animate" />
                                    </Actions>
                                </Loop>
                                <Loop Name="OnHide">
                                    <Events>
                                        <OnHide />
                                    </Events>
                                    <Actions>
                                        <SetVariable Name="Animate" Value="0" />
                                    </Actions>
                                </Loop>
                            </Content>
                        </Trigger>
                        <Object Name="Banner" X="0" Y="0">
                            <Content>
                                <Image ClassName="actives.activator1" X="-68" Y="~Y" Layer="UnderFloorPanels" Width="136" Height="~height" Factor="0">
                                    <Properties>
                                        <Static>
                                            <Matrix A="136" B="0" C="0" D="~height" Tx="0" Ty="0" />
                                        </Static>
                                    </Properties>
                                </Image>
                                <Image ClassName="actives.activator2" X="-68" Y="~YHeader" Layer="UnderFloorPanels" Width="136" Height="126" Factor="0">
                                    <Properties>
                                        <Static>
                                            <Enable Value="~head" />
                                            <Matrix A="-136" B="0" C="0" D="126" Tx="136" Ty="0" />
                                        </Static>
                                    </Properties>
                                </Image>
                            </Content>
                            <Properties>
                                <Dynamic>
                                    <Transformation Name="BannerFadeOut">
                                        <ColorInterval ColorFinish="#FFFFFF00" Frames="10" ColorStart="#FFFFFFFF" />
                                    </Transformation>
                                </Dynamic>
                            </Properties>
                        </Object>
                        <Image ClassName="actives.activator3" X="-20" Y="~arrow_y" Layer="UnderFloorPanels" Width="40" Height="23" Factor="0">
                            <Properties>
                                <Static>
                                    <Matrix A="40" B="0" C="0" D="23" Tx="0" Ty="0" />
                                </Static>
                                <Dynamic>
                                    <Transformation Name="BannerFadeOut">
                                        <ColorInterval ColorFinish="#FFFFFF00" Frames="10" ColorStart="#FFFFFFFF" />
                                    </Transformation>
                                    <Transformation Name="blink">
                                        <MoveInterval Frames="40" Type="Bezier">
                                            <Point X="0" Y="0" />
                                            <Point X="0" Y="-30" />
                                            <Point X="0" Y="-30" />
                                        </MoveInterval>
                                        <MoveInterval Frames="40" Type="Bezier">
                                            <Point X="0" Y="0" />
                                            <Point X="0" Y="30" />
                                            <Point X="0" Y="30" />
                                        </MoveInterval>
                                    </Transformation>
                                </Dynamic>
                            </Properties>
                        </Image>
                        <Image ClassName="actives.teleport" X="-60" Y="~icon_y" Layer="UnderFloorPanels" Width="120" Height="91" Factor="0">
                            <Properties>
                                <Static>
                                    <StartColor Color="#FAE2C6FF" />
                                    <Matrix A="120" B="0" C="0" D="91" Tx="0" Ty="0" />
                                </Static>
                                <Dynamic>
                                    <Transformation Name="BannerFadeOut">
                                        <ColorInterval ColorFinish="#FFFFFF00" Frames="10" ColorStart="#FFFFFFFF" />
                                    </Transformation>
                                </Dynamic>
                            </Properties>
                        </Image>
                        <Object Name="particles" X="0" Y="0">
                            <Content>
                                <Particle Name="FTL" X="0" Y="100" Layer="Particles" Factor="0">
                                    <Properties>
                                        <Static>
                                            <Enable Value="0" />
                                        </Static>
                                        <Dynamic>
                                            <Transformation Name="Teleport_Effect">
                                                <ActivationInterval Type="On" />
                                            </Transformation>
                                        </Dynamic>
                                    </Properties>
                                </Particle>
                            </Content>
                        </Object>
                        <Object Name="Tutor" X="0" Y="0">
                            <Content>
                                <Trigger Name="TutorDeactivator" X="-70" Y="0" Width="150" Height="150">
                                    <Content>
                                        <Init>
                                            <SetVariable Name="$AI" Type="AI" Value="0" />
                                            <SetVariable Name="$Active" Type="Bool" Value="1" />
                                            <SetVariable Name="$Node" Type="Node" Value="COM" />
                                        </Init>
                                        <Loop Name="TurnOff">
                                            <Events>
                                                <OnShow />
                                            </Events>
                                            <Conditions>
                                                <Equal Value1="?getCounter[ST_ProgressMarkers,ShowActivesTutorial]" Value2="0" />
                                            </Conditions>
                                            <Actions>
                                                <Control Model="Player" Switch="On" />
                                                <Transform Name="tutorOff" />
                                            </Actions>
                                        </Loop>
                                    </Content>
                                </Trigger>
                                <ObjectReference Name="TutorialTrigger" X="-70" Y="~Y" Filename="triggers.xml">
                                    <Properties>
                                        <Static>
                                            <OverrideVariable>
                                                <Variable Name="TextKeyboard" Value="^Tutorial.Activator.Text^" />
                                                <Variable Name="Key" Value="Up" />
                                                <Variable Name="Width" Value="100" />
                                                <Variable Name="Height" Value="~height" />
                                                <Variable Name="TextMobile" Value="^Tutorial.Activator.Text^" />
                                            </OverrideVariable>
                                        </Static>
                                    </Properties>
                                </ObjectReference>
                            </Content>
                            <Properties>
                                <Static>
                                    <Enable Value="~enableTutor" />
                                </Static>
                                <Dynamic>
                                    <Transformation Name="tutorOff">
                                        <ActivationInterval Type="Off" />
                                    </Transformation>
                                </Dynamic>
                            </Properties>
                        </Object>
                    </Content>
                </Object>
            </Content>
            <Properties>
                <Static>
                    <ContentVariable>
                        <Variable Name="additional_Y_TP" Type="E_Int" Default="0" AvailableTypes="E_Int" />
                        <Variable Name="deltaX" Type="E_Int" Default="0" AvailableTypes="E_Int" />
                        <Variable Name="deltaY" Type="E_Int" Default="0" AvailableTypes="E_Int" />
                        <Variable Name="height" Type="E_Int" Default="360" AvailableTypes="E_Int" />
                        <Variable Name="head" Type="E_Bool" Default="0" AvailableTypes="E_Bool" />
                        <Expression Name="Y" Value="{200-~height}" />
                        <Expression Name="YHeader" Value="{~Y-126}" />
                        <Expression Name="enableTutor" Value="?getCounter[ST_ProgressMarkers,ShowActivesTutorial]" />
                        <Expression Name="arrow_y_for_nondefaultheight" Value="{-~height/2+175+~additional_Y_TP}" />
                        <Expression Name="arrow_y" Value="?switch[~height, 360:-18, ~arrow_y_for_nondefaultheight]" />
                        <Expression Name="icon_y_for_nondefaultheight" Value="{-~height/2+198+~additional_Y_TP}" />
                        <Expression Name="icon_y" Value="?switch[~height, 360:11, ~icon_y_for_nondefaultheight]" />
                    </ContentVariable>
                </Static>
            </Properties>
        </Object>
        <Object Name="PrehardSpecabilityPlaceHolder" X="0" Y="0">
            <Content>
                <Placeholder Name="" X="0" Y="0">
                    <Properties>
                        <CounterActions>
                            <OnEnter>
                                <Assign Name="PrehardSpecability" Namespace="Placeholder" Value="1" />
                                <Assign Name="EMP" Namespace="Placeholder" Value="~EnableEMP" />
                                <Assign Name="TP" Namespace="Placeholder" Value="~EnableTP" />
                                <Assign Name="deltaX_EMP" Namespace="Placeholder" Value="~deltaX_EMP" />
                                <Assign Name="deltaX_TP" Namespace="Placeholder" Value="~deltaX_TP" />
                                <Assign Name="deltaY_EMP" Namespace="Placeholder" Value="~deltaY_EMP" />
                                <Assign Name="deltaY_TP" Namespace="Placeholder" Value="~deltaY_TP" />
                                <Assign Name="height_EMP" Namespace="Placeholder" Value="~height_EMP" />
                                <Assign Name="height_TP" Namespace="Placeholder" Value="~height_TP" />
                                <Assign Name="head_EMP" Namespace="Placeholder" Value="~head_EMP" />
                                <Assign Name="head_TP" Namespace="Placeholder" Value="~head_TP" />
                                <Assign Name="additional_Y_EMP" Namespace="Placeholder" Value="~additional_Y_EMP" />
                                <Assign Name="additional_Y_TP" Namespace="Placeholder" Value="~additional_Y_TP" />
                            </OnEnter>
                            <OnExit>
                                <Clear Name="PrehardSpecability" Namespace="Placeholder" />
                                <Clear Name="EMP" Namespace="Placeholder" />
                                <Clear Name="TP" Namespace="Placeholder" />
                                <Clear Name="deltaX_TP" Namespace="Placeholder" />
                                <Clear Name="deltaX_EMP" Namespace="Placeholder" />
                                <Clear Name="deltaY_TP" Namespace="Placeholder" />
                                <Clear Name="deltaY_EMP" Namespace="Placeholder" />
                                <Clear Name="height_TP" Namespace="Placeholder" />
                                <Clear Name="height_EMP" Namespace="Placeholder" />
                                <Clear Name="head_EMP" Namespace="Placeholder" />
                                <Clear Name="head_TP" Namespace="Placeholder" />
                                <Clear Name="additional_Y_EMP" Namespace="Placeholder" />
                                <Clear Name="additional_Y_TP" Namespace="Placeholder" />
                            </OnExit>
                        </CounterActions>
                    </Properties>
                </Placeholder>
                <Object Name="EMP_Phantom" X="~deltaX_EMP" Y="~deltaY_EMP">
                    <Content>
                        <Comment Text="EMP" X="-70" Y="~Y_EMP" Size="32" Width="140" Height="~height_EMP" Color="#B800DDFF" />
                    </Content>
                    <Properties>
                        <Static>
                            <Enable Value="~EnableEMP" />
                        </Static>
                    </Properties>
                </Object>
                <Object Name="TP_Phantom" X="~deltaX_TP" Y="~deltaY_TP">
                    <Content>
                        <Comment Text="TP" X="-70" Y="~Y_TP" Size="32" Width="140" Height="~height_TP" Color="#00DDDDFF" />
                    </Content>
                    <Properties>
                        <Static>
                            <Enable Value="~EnableTP" />
                        </Static>
                    </Properties>
                </Object>
            </Content>
            <Properties>
                <Static>
                    <ContentVariable>
                        <Variable Name="additional_Y_EMP" Type="E_Int" Default="0" AvailableTypes="E_Int" />
                        <Variable Name="additional_Y_TP" Type="E_Int" Default="0" AvailableTypes="E_Int" />
                        <Variable Name="EnableTP" Type="E_Bool" Default="1" AvailableTypes="E_Bool" />
                        <Variable Name="EnableEMP" Type="E_Bool" Default="1" AvailableTypes="E_Bool" />
                        <Variable Name="deltaX_EMP" Type="E_Int" Default="0" AvailableTypes="E_Int" />
                        <Variable Name="deltaX_TP" Type="E_Int" Default="0" AvailableTypes="E_Int" />
                        <Variable Name="deltaY_EMP" Type="E_Int" Default="0" AvailableTypes="E_Int" />
                        <Variable Name="deltaY_TP" Type="E_Int" Default="0" AvailableTypes="E_Int" />
                        <Variable Name="height_EMP" Type="E_Int" Default="360" AvailableTypes="E_Int" />
                        <Variable Name="height_TP" Type="E_Int" Default="360" AvailableTypes="E_Int" />
                        <Variable Name="head_EMP" Type="E_Bool" Default="0" AvailableTypes="E_Bool" />
                        <Variable Name="head_TP" Type="E_Bool" Default="0" AvailableTypes="E_Bool" />
                        <Expression Name="Y_EMP" Value="{200-~height_EMP}" />
                        <Expression Name="Y_TP" Value="{200-~height_TP}" />
                    </ContentVariable>
                    <GeneratorLabel Name="EMP" Value="~EnableEMP" />
                    <GeneratorLabel Name="TP" Value="~EnableTP" />
                </Static>
            </Properties>
        </Object>
        <Object Name="BlinkingDarkness" X="0" Y="0">
            <Content>
                <Trigger Name="BlinkingDarkness" X="-500" Y="-750" Width="100" Height="1000">
                    <Content>
                        <Init>
                            <SetVariable Name="$Active" Type="Bool" Value="1" />
                            <SetVariable Name="$AI" Type="AI" Value="0" />
                            <SetVariable Name="$Node" Type="Node" Value="COM" />
                            <SetVariable Name="Count" Value="4" />
                        </Init>
                        <Loop Name="Enter">
                            <Events>
                                <Enter />
                            </Events>
                            <Actions>
                                <Activate ActionID="Blink" />
                            </Actions>
                        </Loop>
                        <Loop Name="Blinking">
                            <Events>
                                <Activate />
                            </Events>
                            <Conditions>
                                <Equal Value1="_$ActionID" Value2="Blink" />
                                <Greater Value1="_Count" Value2="0" />
                            </Conditions>
                            <Actions>
                                <SetVariable Name="?getCameraEffect[Darkness].radius" Value="40" />
                                <SetVariable Name="?getCameraEffect[Darkness].enabled" Value="1" />
                                <SetVariable Name="?getCameraEffect[Darkness].alpha" Value="5" />
                                <Sound Name="power_failures" Volume="1" />
                                <Wait Frames="{5 +_Count * ?ListRandom[5,10]}" />
                                <SetVariable Name="?getCameraEffect[Darkness].alpha" Value="100" />
                                <Wait Frames="{5 + _Count * ?ListRandom[5,10]}" />
                                <SetVariable Name="?getCameraEffect[Darkness].enabled" Value="0" />
                                <AppendValue Name="Count" Value="-1" />
                                <Activate ActionID="Blink" />
                            </Actions>
                        </Loop>
                    </Content>
                </Trigger>
            </Content>
            <Properties>
                <Static>
                    <Enable Value="~isEnable" />
                    <ContentVariable>
                        <Expression Name="isEnable" Value="?getCounter[Temp,BlinkingFinishRoom]" />
                    </ContentVariable>
                </Static>
            </Properties>
        </Object>
        <Object Name="InstallMemoryTerminal" X="0" Y="0">
            <Content>
                <Trigger Name="InstallMemoryTerminal" X="0" Y="0" Width="380" Height="610">
                    <Content>
                        <Init>
                            <SetVariable Name="$AI" Type="AI" Value="0" />
                            <SetVariable Name="$Active" Type="Bool" Value="1" />
                            <SetVariable Name="$Node" Type="Node" Value="COM" />
                            <SetVariable Name="Index" Value="~Index" />
                        </Init>
                        <Loop Name="Good">
                            <Events>
                                <Enter />
                            </Events>
                            <Conditions>
                                <Equal Value1="_Index" Value2="?getCounter[MemoryInstall,InstallProgress]" />
                            </Conditions>
                            <Actions>
                                <Sound Name="fuzesocket" Volume="1" DuckEffect="1" />
                                <AppendValue Name="?getCounter[MemoryInstall,InstallProgress]" Value="1" />
                                <ExecuteCall Message="InstallOrderGood" />
                                <Transform Name="BlueFadeIn" />
                            </Actions>
                        </Loop>
                        <Loop Name="Bad">
                            <Events>
                                <Enter />
                            </Events>
                            <Conditions>
                                <Equal Value1="_Index" Value2="?getCounter[MemoryInstall,InstallProgress]" Not="1" />
                            </Conditions>
                            <Actions>
                                <ExecuteCall Message="InstallOrderFail" />
                                <Transform Name="FAIL" />
                            </Actions>
                        </Loop>
                    </Content>
                </Trigger>
                <Object Name="Graphics" X="~TerminalX" Y="~TerminalY">
                    <Content>
                        <Image ClassName="memory_terminal.5" X="488" Y="72" Layer="CPanels" Width="92" Height="108" Factor="0">
                            <Properties>
                                <Static>
                                    <Matrix A="92" B="0" C="0" D="108" Tx="0" Ty="0" />
                                </Static>
                            </Properties>
                        </Image>
                        <Object Name="left_part" X="0" Y="0">
                            <Content>
                                <Image ClassName="memory_terminal.2" X="0" Y="0" Layer="CPanels" Width="455" Height="324" Factor="0">
                                    <Properties>
                                        <Static>
                                            <Matrix A="455" B="0" C="0" D="324" Tx="0" Ty="0" />
                                        </Static>
                                    </Properties>
                                </Image>
                                <Image ClassName="memory_terminal.8" X="255" Y="114" Layer="CPanels" Width="79" Height="33" Factor="0">
                                    <Properties>
                                        <Static>
                                            <Matrix A="79" B="0" C="0" D="33" Tx="0" Ty="0" />
                                        </Static>
                                    </Properties>
                                </Image>
                                <Image ClassName="memory_terminal.9" X="366" Y="125" Layer="CPanels" Width="20" Height="15" Factor="0">
                                    <Properties>
                                        <Static>
                                            <Matrix A="20" B="0" C="0" D="15" Tx="0" Ty="0" />
                                        </Static>
                                    </Properties>
                                </Image>
                            </Content>
                            <Properties>
                                <Static>
                                    <Enable Value="~Left_Part" />
                                </Static>
                            </Properties>
                        </Object>
                        <Object Name="right_part" X="610" Y="0">
                            <Content>
                                <Image ClassName="memory_terminal.3" X="0" Y="0" Layer="CPanels" Width="241" Height="324" Factor="0">
                                    <Properties>
                                        <Static>
                                            <Matrix A="241" B="0" C="0" D="324" Tx="0" Ty="0" />
                                        </Static>
                                    </Properties>
                                </Image>
                            </Content>
                            <Properties>
                                <Static>
                                    <Enable Value="~Right_Part" />
                                </Static>
                            </Properties>
                        </Object>
                        <Image ClassName="memory_terminal.1" X="455" Y="0" Layer="CPanels" Width="78" Height="324" Factor="0">
                            <Properties>
                                <Static>
                                    <Matrix A="78" B="0" C="0" D="324" Tx="0" Ty="0" />
                                </Static>
                            </Properties>
                        </Image>
                        <Image ClassName="memory_terminal.1" X="532" Y="0" Layer="CPanels" Width="78" Height="324" Factor="0">
                            <Properties>
                                <Static>
                                    <Matrix A="-78" B="0" C="0" D="324" Tx="78" Ty="0" />
                                </Static>
                            </Properties>
                        </Image>
                        <Image ClassName="memory_terminal.4" X="481" Y="90" Layer="CPanels" Width="24" Height="92" Factor="0">
                            <Properties>
                                <Static>
                                    <Matrix A="24" B="0" C="0" D="92" Tx="0" Ty="0" />
                                </Static>
                            </Properties>
                        </Image>
                        <Image ClassName="memory_terminal.6" X="455" Y="53" Layer="CPanels" Width="155" Height="189" Factor="0">
                            <Properties>
                                <Static>
                                    <Matrix A="155" B="0" C="0" D="189" Tx="0" Ty="0" />
                                </Static>
                                <Dynamic>
                                    <Transformation Name="RedFadeIn">
                                        <ColorInterval ColorFinish="#FFFFFFFF" Frames="10" />
                                    </Transformation>
                                </Dynamic>
                            </Properties>
                        </Image>
                        <Image ClassName="memory_terminal.7" X="455" Y="53" Layer="CPanels" Width="155" Height="189" Factor="0">
                            <Properties>
                                <Static>
                                    <Matrix A="155" B="0" C="0" D="189" Tx="0" Ty="0" />
                                    <StartColor Color="#FFFFFF00" />
                                </Static>
                                <Dynamic>
                                    <Transformation Name="BlueFadeIn">
                                        <ColorInterval ColorFinish="#FFFFFFFF" Frames="60" />
                                    </Transformation>
                                </Dynamic>
                            </Properties>
                        </Image>
                    </Content>
                </Object>
            </Content>
            <Properties>
                <Static>
                    <ContentVariable>
                        <Variable Name="Index" Default="0" />
                        <Variable Name="TerminalX" Type="E_Int" Default="0" AvailableTypes="E_Int" />
                        <Variable Name="TerminalY" Type="E_Int" Default="286" AvailableTypes="E_Int" />
                        <Variable Name="Left_Part" Type="E_Bool" Default="1" AvailableTypes="E_Bool" />
                        <Variable Name="Right_Part" Type="E_Bool" Default="1" AvailableTypes="E_Bool" />
                    </ContentVariable>
                </Static>
            </Properties>
        </Object>
        <Object Name="DarknessSofter" X="0" Y="0">
            <Content>
                <Trigger Name="DarknessSofter" X="0" Y="0" Width="~Width" Height="~Height">
                    <Content>
                        <Init>
                            <SetVariable Name="$Active" Type="Bool" Value="1" />
                            <SetVariable Name="$AI" Type="AI" Value="0" />
                            <SetVariable Name="$Node" Type="Node" Value="COM" />
                            <SetVariable Name="BigRadius" Value="150" />
                            <SetVariable Name="DefaultRadius" Value="0" />
                        </Init>
                        <Loop Name="OnShow">
                            <Events>
                                <OnShow />
                            </Events>
                            <Actions>
                                <AppendValue Name="?getCounter[Temp, PendingDarknessSofter]" Value="1" />
                                <SetVariable Name="?getCounter[Temp, SofterDarknessRadius]" Value="_BigRadius" />
                                <Activate ActionID="PrepareToIncreaseRadius" />
                            </Actions>
                        </Loop>
                        <Loop Name="PrepareToIncreaseRadius">
                            <Events>
                                <Activate />
                            </Events>
                            <Conditions>
                                <Equal Value1="?getCameraEffect[Darkness].enabled" Value2="1" />
                                <Equal Value1="?getCounter[Temp, PendingDarknessSofter]" Value2="1" />
                                <Equal Value1="_$ActionID" Value2="PrepareToIncreaseRadius" />
                            </Conditions>
                            <Actions>
                                <Activate ActionID="IncreaseRadius" />
                            </Actions>
                        </Loop>
                        <Loop Name="IncreaseRadius">
                            <Events>
                                <Activate />
                            </Events>
                            <Conditions>
                                <Greater Value1="?getCounter[Temp, PendingDarknessSofter]" Value2="0" />
                                <Equal Value1="_$ActionID" Value2="IncreaseRadius" />
                                <Less Value1="?getCameraEffect[Darkness].radius" Value2="_BigRadius" />
                            </Conditions>
                            <Actions>
                                <AppendValue Name="?getCameraEffect[Darkness].radius" Value="5" />
                                <Wait Frames="1" />
                                <Activate ActionID="IncreaseRadius" />
                            </Actions>
                        </Loop>
                        <Loop Name="OnHide">
                            <Events>
                                <OnHide />
                            </Events>
                            <Actions>
                                <AppendValue Name="?getCounter[Temp, PendingDarknessSofter]" Value="-1" />
                                <Activate ActionID="DecreaseRadius" />
                            </Actions>
                        </Loop>
                        <Loop Name="DecreaseRadius">
                            <Events>
                                <Activate />
                            </Events>
                            <Conditions>
                                <Equal Value1="?getCounter[Temp, PendingDarknessSofter]" Value2="0" />
                                <Equal Value1="?getCameraEffect[Darkness].enabled" Value2="1" />
                                <Equal Value1="_$ActionID" Value2="DecreaseRadius" />
                                <Greater Value1="?getCameraEffect[Darkness].radius" Value2="?getBalance[Floor,Darkness,Radius,?getCounter[ST_Floor]]" />
                            </Conditions>
                            <Actions>
                                <AppendValue Name="?getCameraEffect[Darkness].radius" Value="-5" />
                                <Wait Frames="1" />
                                <Activate ActionID="DecreaseRadius" />
                            </Actions>
                        </Loop>
                    </Content>
                </Trigger>
            </Content>
            <Properties>
                <Static>
                    <ContentVariable>
                        <Variable Name="Width" Default="100" />
                        <Variable Name="Height" Default="100" />
                    </ContentVariable>
                </Static>
            </Properties>
        </Object>
    </Objects>
</Root>